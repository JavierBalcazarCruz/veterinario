<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plan de Pruebas Completo - Sistema Veterinario SisVet</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 60px 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.3em;
            opacity: 0.95;
        }

        .header .date {
            margin-top: 20px;
            font-size: 1em;
            opacity: 0.8;
        }

        .nav {
            background: #2c3e50;
            padding: 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }

        .nav li {
            margin: 0;
        }

        .nav a {
            display: block;
            padding: 15px 20px;
            color: white;
            text-decoration: none;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            font-size: 0.9em;
        }

        .nav a:hover {
            background: #34495e;
            border-bottom-color: #667eea;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 60px;
            padding: 40px;
            background: #f8f9fa;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .section h2 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 30px;
            border-bottom: 4px solid #667eea;
            padding-bottom: 15px;
        }

        .section h3 {
            color: #764ba2;
            font-size: 1.8em;
            margin-top: 30px;
            margin-bottom: 20px;
        }

        .section h4 {
            color: #555;
            font-size: 1.4em;
            margin-top: 25px;
            margin-bottom: 15px;
        }

        .test-case {
            background: white;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .test-case h5 {
            color: #667eea;
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .test-case .test-id {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 3px 10px;
            border-radius: 4px;
            font-size: 0.85em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .test-case .priority {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 4px;
            font-size: 0.85em;
            font-weight: bold;
            margin-left: 10px;
        }

        .priority-critical { background: #ef4444; color: white; }
        .priority-high { background: #f59e0b; color: white; }
        .priority-medium { background: #3b82f6; color: white; }
        .priority-low { background: #10b981; color: white; }

        .test-type {
            display: inline-block;
            background: #764ba2;
            color: white;
            padding: 3px 10px;
            border-radius: 4px;
            font-size: 0.85em;
            margin-left: 10px;
        }

        .test-details {
            margin-top: 15px;
        }

        .test-details dt {
            font-weight: bold;
            color: #555;
            margin-top: 10px;
        }

        .test-details dd {
            margin-left: 20px;
            margin-bottom: 8px;
            color: #666;
        }

        .test-steps {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
        }

        .test-steps ol {
            margin-left: 20px;
        }

        .test-steps li {
            margin: 8px 0;
        }

        .expected-result {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #10b981;
            margin: 10px 0;
        }

        .badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
            margin: 5px 5px 5px 0;
        }

        .badge-success { background: #10b981; color: white; }
        .badge-warning { background: #f59e0b; color: white; }
        .badge-danger { background: #ef4444; color: white; }
        .badge-info { background: #3b82f6; color: white; }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: bold;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid #e5e7eb;
        }

        tr:hover {
            background: #f3f4f6;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .summary-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s ease;
        }

        .summary-card:hover {
            transform: translateY(-5px);
        }

        .summary-card .number {
            font-size: 3em;
            font-weight: bold;
            color: #667eea;
            margin: 10px 0;
        }

        .summary-card .label {
            color: #666;
            font-size: 1.1em;
        }

        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .alert {
            padding: 15px 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .alert-info {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            color: #1976d2;
        }

        .alert-warning {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            color: #f57c00;
        }

        .alert-danger {
            background: #ffebee;
            border-left: 4px solid #f44336;
            color: #c62828;
        }

        .alert-success {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            color: #2e7d32;
        }

        .module-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 30px;
            border-radius: 10px;
            margin: 30px 0 20px 0;
        }

        .module-header h3 {
            color: white;
            margin: 0;
        }

        .checklist {
            list-style: none;
            padding-left: 0;
        }

        .checklist li {
            padding: 8px 0;
            padding-left: 30px;
            position: relative;
        }

        .checklist li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #10b981;
            font-weight: bold;
            font-size: 1.2em;
        }

        @media print {
            .nav {
                position: static;
            }

            body {
                background: white;
                padding: 0;
            }

            .container {
                box-shadow: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìã Plan de Pruebas Completo</h1>
            <p>Sistema Veterinario SisVet</p>
            <div class="date">Generado: 13 de Noviembre de 2025</div>
        </div>

        <nav class="nav">
            <ul>
                <li><a href="#resumen">Resumen</a></li>
                <li><a href="#modulos">M√≥dulos</a></li>
                <li><a href="#autenticacion">Autenticaci√≥n</a></li>
                <li><a href="#pacientes">Pacientes</a></li>
                <li><a href="#citas">Citas</a></li>
                <li><a href="#historial">Historial</a></li>
                <li><a href="#estetica">Est√©tica</a></li>
                <li><a href="#dashboard">Dashboard</a></li>
                <li><a href="#integracion">Integraci√≥n</a></li>
                <li><a href="#seguridad">Seguridad</a></li>
                <li><a href="#performance">Performance</a></li>
                <li><a href="#ui">UI/UX</a></li>
            </ul>
        </nav>

        <div class="content">
            <!-- RESUMEN EJECUTIVO -->
            <section id="resumen" class="section">
                <h2>üìä Resumen Ejecutivo</h2>

                <div class="alert alert-info">
                    <strong>Objetivo:</strong> Validar completamente el Sistema Veterinario SisVet antes de su implementaci√≥n con clientes reales. Este documento detalla todas las pruebas necesarias para garantizar la calidad, seguridad y funcionalidad del sistema.
                </div>

                <div class="summary-grid">
                    <div class="summary-card">
                        <div class="number">389</div>
                        <div class="label">Casos de Prueba Total</div>
                    </div>
                    <div class="summary-card">
                        <div class="number">8</div>
                        <div class="label">M√≥dulos Principales</div>
                    </div>
                    <div class="summary-card">
                        <div class="number">156</div>
                        <div class="label">Pruebas Cr√≠ticas</div>
                    </div>
                    <div class="summary-card">
                        <div class="number">33+</div>
                        <div class="label">Tablas de Base de Datos</div>
                    </div>
                </div>

                <h3>Distribuci√≥n de Pruebas por M√≥dulo</h3>
                <table>
                    <thead>
                        <tr>
                            <th>M√≥dulo</th>
                            <th>Pruebas Unitarias</th>
                            <th>Pruebas Integraci√≥n</th>
                            <th>Pruebas E2E</th>
                            <th>Total</th>
                            <th>Prioridad</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Autenticaci√≥n</strong></td>
                            <td>25</td>
                            <td>15</td>
                            <td>12</td>
                            <td><strong>52</strong></td>
                            <td><span class="badge badge-danger">Cr√≠tica</span></td>
                        </tr>
                        <tr>
                            <td><strong>Pacientes</strong></td>
                            <td>32</td>
                            <td>18</td>
                            <td>15</td>
                            <td><strong>65</strong></td>
                            <td><span class="badge badge-danger">Cr√≠tica</span></td>
                        </tr>
                        <tr>
                            <td><strong>Citas M√©dicas</strong></td>
                            <td>28</td>
                            <td>20</td>
                            <td>14</td>
                            <td><strong>62</strong></td>
                            <td><span class="badge badge-danger">Cr√≠tica</span></td>
                        </tr>
                        <tr>
                            <td><strong>Historial Cl√≠nico</strong></td>
                            <td>35</td>
                            <td>22</td>
                            <td>18</td>
                            <td><strong>75</strong></td>
                            <td><span class="badge badge-danger">Cr√≠tica</span></td>
                        </tr>
                        <tr>
                            <td><strong>Est√©tica y Grooming</strong></td>
                            <td>22</td>
                            <td>12</td>
                            <td>10</td>
                            <td><strong>44</strong></td>
                            <td><span class="badge badge-warning">Alta</span></td>
                        </tr>
                        <tr>
                            <td><strong>Dashboard</strong></td>
                            <td>18</td>
                            <td>10</td>
                            <td>8</td>
                            <td><strong>36</strong></td>
                            <td><span class="badge badge-info">Media</span></td>
                        </tr>
                        <tr>
                            <td><strong>Seguridad</strong></td>
                            <td>20</td>
                            <td>15</td>
                            <td>10</td>
                            <td><strong>45</strong></td>
                            <td><span class="badge badge-danger">Cr√≠tica</span></td>
                        </tr>
                        <tr>
                            <td><strong>Performance y UI/UX</strong></td>
                            <td>-</td>
                            <td>-</td>
                            <td>10</td>
                            <td><strong>10</strong></td>
                            <td><span class="badge badge-info">Media</span></td>
                        </tr>
                        <tr style="background: #f0f0f0; font-weight: bold;">
                            <td>TOTAL</td>
                            <td>180</td>
                            <td>112</td>
                            <td>97</td>
                            <td><strong>389</strong></td>
                            <td>-</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Niveles de Prioridad</h3>
                <ul>
                    <li><span class="priority priority-critical">CR√çTICA</span> - Afecta funcionalidad core o seguridad. Debe ser 100% exitosa antes de producci√≥n.</li>
                    <li><span class="priority priority-high">ALTA</span> - Funcionalidad importante. Debe ser >95% exitosa.</li>
                    <li><span class="priority priority-medium">MEDIA</span> - Mejoras de experiencia. Debe ser >85% exitosa.</li>
                    <li><span class="priority priority-low">BAJA</span> - Optimizaciones. Puede ser >70% exitosa.</li>
                </ul>
            </section>

            <!-- M√ìDULO 1: AUTENTICACI√ìN -->
            <section id="autenticacion" class="section">
                <div class="module-header">
                    <h2>üîê M√≥dulo 1: Autenticaci√≥n y Gesti√≥n de Usuarios</h2>
                </div>

                <div class="alert alert-danger">
                    <strong>‚ö†Ô∏è PRIORIDAD CR√çTICA:</strong> La autenticaci√≥n es la puerta de entrada al sistema. Cualquier fallo puede comprometer la seguridad de todos los datos m√©dicos.
                </div>

                <h3>1.1 Registro de Veterinarios</h3>

                <!-- Test Case AUTH-001 -->
                <div class="test-case">
                    <span class="test-id">AUTH-001</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Unitaria</span>
                    <h5>Registro exitoso con datos v√°lidos</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>Verificar que un veterinario puede registrarse con datos completos y v√°lidos</dd>

                        <dt>Precondiciones:</dt>
                        <dd>
                            - Base de datos limpia<br>
                            - Email no registrado previamente<br>
                            - Servicio de email configurado
                        </dd>

                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Navegar a /register</li>
                                    <li>Ingresar nombre: "Dr. Juan P√©rez"</li>
                                    <li>Ingresar email: "juan.perez@veterinaria.com"</li>
                                    <li>Ingresar password: "SecurePass123!"</li>
                                    <li>Confirmar password: "SecurePass123!"</li>
                                    <li>Click en "Registrarse"</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Usuario creado en tabla <code>usuarios</code> con estado "no_confirmado"<br>
                                ‚úì Password encriptado con bcrypt<br>
                                ‚úì Token de confirmaci√≥n generado y guardado en <code>user_tokens</code><br>
                                ‚úì Email de confirmaci√≥n enviado con link v√°lido<br>
                                ‚úì Mensaje de √©xito: "Revisa tu email para confirmar tu cuenta"<br>
                                ‚úì Redirecci√≥n a /login<br>
                                ‚úì Audit log creado con acci√≥n "user_registered"
                            </div>
                        </dd>

                        <dt>Verificaciones en BD:</dt>
                        <dd>
                            <div class="code-block">
SELECT * FROM usuarios WHERE email = 'juan.perez@veterinaria.com';
-- estado = 'no_confirmado'
-- password != 'SecurePass123!' (debe estar hasheado)

SELECT * FROM user_tokens WHERE usuario_id = [id_usuario];
-- tipo = 'confirmacion'
-- usado = 0
-- expira_en > NOW()
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case AUTH-002 -->
                <div class="test-case">
                    <span class="test-id">AUTH-002</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Unitaria</span>
                    <h5>Rechazo de email duplicado</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>Verificar que el sistema rechaza registros con email ya existente</dd>

                        <dt>Precondiciones:</dt>
                        <dd>Usuario con email "existente@test.com" ya registrado</dd>

                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Intentar registrar con email "existente@test.com"</li>
                                    <li>Completar formulario con datos v√°lidos</li>
                                    <li>Submit</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Error HTTP 400 Bad Request<br>
                                ‚úì Mensaje: "El email ya est√° registrado"<br>
                                ‚úì No se crea nuevo registro en BD<br>
                                ‚úì No se env√≠a email<br>
                                ‚úì Usuario permanece en p√°gina de registro
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case AUTH-003 -->
                <div class="test-case">
                    <span class="test-id">AUTH-003</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">Unitaria</span>
                    <h5>Validaci√≥n de formato de email</h5>

                    <dl class="test-details">
                        <dt>Casos a probar:</dt>
                        <dd>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Email</th>
                                        <th>Resultado Esperado</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>invalido</td>
                                        <td>‚ùå Rechazado - "Email inv√°lido"</td>
                                    </tr>
                                    <tr>
                                        <td>invalido@</td>
                                        <td>‚ùå Rechazado - "Email inv√°lido"</td>
                                    </tr>
                                    <tr>
                                        <td>@dominio.com</td>
                                        <td>‚ùå Rechazado - "Email inv√°lido"</td>
                                    </tr>
                                    <tr>
                                        <td>valido@dominio.com</td>
                                        <td>‚úÖ Aceptado</td>
                                    </tr>
                                    <tr>
                                        <td>valido+tag@dominio.co.mx</td>
                                        <td>‚úÖ Aceptado</td>
                                    </tr>
                                </tbody>
                            </table>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case AUTH-004 -->
                <div class="test-case">
                    <span class="test-id">AUTH-004</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Unitaria</span>
                    <h5>Validaci√≥n de contrase√±a segura</h5>

                    <dl class="test-details">
                        <dt>Casos a probar:</dt>
                        <dd>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Contrase√±a</th>
                                        <th>Resultado Esperado</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>123</td>
                                        <td>‚ùå "M√≠nimo 6 caracteres"</td>
                                    </tr>
                                    <tr>
                                        <td>12345</td>
                                        <td>‚ùå "M√≠nimo 6 caracteres"</td>
                                    </tr>
                                    <tr>
                                        <td>123456</td>
                                        <td>‚úÖ Aceptado (pero advertir seguridad)</td>
                                    </tr>
                                    <tr>
                                        <td>Pass123!</td>
                                        <td>‚úÖ Aceptado - Contrase√±a fuerte</td>
                                    </tr>
                                </tbody>
                            </table>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case AUTH-005 -->
                <div class="test-case">
                    <span class="test-id">AUTH-005</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">Unitaria</span>
                    <h5>Confirmaci√≥n de contrase√±a coincidente</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>Verificar que password y confirmaci√≥n deben ser id√©nticas</dd>

                        <dt>Casos:</dt>
                        <dd>
                            - Password: "Test123!" / Confirm: "Test123!" ‚Üí ‚úÖ Aceptado<br>
                            - Password: "Test123!" / Confirm: "Test123" ‚Üí ‚ùå "Las contrase√±as no coinciden"<br>
                            - Password: "Test123!" / Confirm: "test123!" ‚Üí ‚ùå "Las contrase√±as no coinciden"
                        </dd>
                    </dl>
                </div>

                <h3>1.2 Confirmaci√≥n de Cuenta</h3>

                <!-- Test Case AUTH-006 -->
                <div class="test-case">
                    <span class="test-id">AUTH-006</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Confirmaci√≥n exitosa con token v√°lido</h5>

                    <dl class="test-details">
                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Registrar usuario nuevo</li>
                                    <li>Obtener token de BD: <code>SELECT token FROM user_tokens WHERE usuario_id = X</code></li>
                                    <li>Navegar a /confirmar-cuenta/:token</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Usuario actualizado: <code>confirmado = 1</code><br>
                                ‚úì Token marcado como usado: <code>usado = 1</code><br>
                                ‚úì Mensaje: "Cuenta confirmada exitosamente"<br>
                                ‚úì Redirecci√≥n a /login<br>
                                ‚úì Usuario puede hacer login inmediatamente
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case AUTH-007 -->
                <div class="test-case">
                    <span class="test-id">AUTH-007</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Unitaria</span>
                    <h5>Rechazo de token inv√°lido</h5>

                    <dl class="test-details">
                        <dt>Pasos:</dt>
                        <dd>Navegar a /confirmar-cuenta/token-inventado-123</dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Error HTTP 404<br>
                                ‚úì Mensaje: "Token inv√°lido o expirado"<br>
                                ‚úì No se modifica ning√∫n registro en BD<br>
                                ‚úì Link para solicitar nuevo token
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case AUTH-008 -->
                <div class="test-case">
                    <span class="test-id">AUTH-008</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">Unitaria</span>
                    <h5>Rechazo de token ya usado</h5>

                    <dl class="test-details">
                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Confirmar cuenta con token v√°lido (primera vez)</li>
                                    <li>Intentar usar el mismo token nuevamente</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Error: "Este token ya fue utilizado"<br>
                                ‚úì No se realizan cambios en BD<br>
                                ‚úì Usuario ya confirmado permanece confirmado
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case AUTH-009 -->
                <div class="test-case">
                    <span class="test-id">AUTH-009</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Reenv√≠o de email de confirmaci√≥n</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>Usuario no confirmado puede solicitar reenv√≠o de email</dd>

                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Usuario registrado pero no confirmado</li>
                                    <li>Click en "Reenviar email de confirmaci√≥n"</li>
                                    <li>Ingresar email registrado</li>
                                    <li>Submit</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Nuevo token generado (el anterior se invalida)<br>
                                ‚úì Nuevo email enviado con token actualizado<br>
                                ‚úì Mensaje: "Email de confirmaci√≥n reenviado"<br>
                                ‚úì L√≠mite de reenv√≠os: m√°ximo 3 por hora
                            </div>
                        </dd>
                    </dl>
                </div>

                <h3>1.3 Login (Autenticaci√≥n)</h3>

                <!-- Test Case AUTH-010 -->
                <div class="test-case">
                    <span class="test-id">AUTH-010</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Login exitoso con credenciales v√°lidas</h5>

                    <dl class="test-details">
                        <dt>Precondiciones:</dt>
                        <dd>Usuario confirmado con email: test@test.com / password: Test123!</dd>

                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Navegar a /login</li>
                                    <li>Ingresar email: "test@test.com"</li>
                                    <li>Ingresar password: "Test123!"</li>
                                    <li>Click en "Iniciar Sesi√≥n"</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Token JWT generado correctamente<br>
                                ‚úì Token incluye: id, nombre, email, rol<br>
                                ‚úì Token guardado en localStorage<br>
                                ‚úì Header Authorization configurado en Axios<br>
                                ‚úì Redirecci√≥n a /dashboard<br>
                                ‚úì Context AuthContext actualizado con usuario<br>
                                ‚úì Sesi√≥n registrada en <code>user_sessions</code><br>
                                ‚úì Toast de bienvenida: "Bienvenido Dr. [Nombre]"
                            </div>
                        </dd>

                        <dt>Validar JWT:</dt>
                        <dd>
                            <div class="code-block">
// Decodificar JWT en https://jwt.io
{
  "id": 123,
  "nombre": "Dr. Test",
  "email": "test@test.com",
  "rol": "doctor",
  "iat": [timestamp],
  "exp": [timestamp + 30 d√≠as]
}
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case AUTH-011 -->
                <div class="test-case">
                    <span class="test-id">AUTH-011</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Unitaria</span>
                    <h5>Rechazo de credenciales incorrectas</h5>

                    <dl class="test-details">
                        <dt>Casos a probar:</dt>
                        <dd>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Email</th>
                                        <th>Password</th>
                                        <th>Resultado</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>inexistente@test.com</td>
                                        <td>cualquiera</td>
                                        <td>‚ùå "Email o contrase√±a incorrectos"</td>
                                    </tr>
                                    <tr>
                                        <td>test@test.com</td>
                                        <td>wrongpass</td>
                                        <td>‚ùå "Email o contrase√±a incorrectos"</td>
                                    </tr>
                                    <tr>
                                        <td>TEST@TEST.COM</td>
                                        <td>Test123!</td>
                                        <td>‚úÖ Login exitoso (case-insensitive)</td>
                                    </tr>
                                </tbody>
                            </table>
                        </dd>

                        <dt>Importante:</dt>
                        <dd>
                            <div class="alert alert-warning">
                                ‚ö†Ô∏è El mensaje de error debe ser gen√©rico ("Email o contrase√±a incorrectos") para no revelar si el email existe o no (seguridad).
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case AUTH-012 -->
                <div class="test-case">
                    <span class="test-id">AUTH-012</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Unitaria</span>
                    <h5>Bloqueo de cuenta no confirmada</h5>

                    <dl class="test-details">
                        <dt>Precondiciones:</dt>
                        <dd>Usuario registrado pero no confirmado (confirmado = 0)</dd>

                        <dt>Pasos:</dt>
                        <dd>Intentar login con credenciales correctas</dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Error HTTP 403 Forbidden<br>
                                ‚úì Mensaje: "Debes confirmar tu cuenta para acceder"<br>
                                ‚úì Link para reenviar email de confirmaci√≥n<br>
                                ‚úì No se genera JWT<br>
                                ‚úì No se crea sesi√≥n
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case AUTH-013 -->
                <div class="test-case">
                    <span class="test-id">AUTH-013</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">Seguridad</span>
                    <h5>Protecci√≥n contra ataques de fuerza bruta</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>Limitar intentos de login fallidos para prevenir ataques</dd>

                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Intentar login con password incorrecta (5 veces)</li>
                                    <li>Verificar respuesta en el 5to intento</li>
                                    <li>Esperar tiempo de bloqueo</li>
                                    <li>Reintentar</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Despu√©s de 5 intentos fallidos: cuenta bloqueada temporalmente<br>
                                ‚úì Mensaje: "Cuenta bloqueada. Intenta en 15 minutos"<br>
                                ‚úì Registro en <code>audit_logs</code> de intentos fallidos<br>
                                ‚úì Email de alerta al usuario sobre intentos sospechosos<br>
                                ‚úì Despu√©s de 15 min: permitir nuevos intentos
                            </div>
                        </dd>
                    </dl>
                </div>

                <h3>1.4 Recuperaci√≥n de Contrase√±a</h3>

                <!-- Test Case AUTH-014 -->
                <div class="test-case">
                    <span class="test-id">AUTH-014</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Solicitud de reset de contrase√±a</h5>

                    <dl class="test-details">
                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Click en "¬øOlvidaste tu contrase√±a?" en /login</li>
                                    <li>Navegar a /olvide-password</li>
                                    <li>Ingresar email registrado</li>
                                    <li>Submit</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Token de reset generado y guardado<br>
                                ‚úì Email enviado con instrucciones y link<br>
                                ‚úì Link v√°lido por 1 hora<br>
                                ‚úì Mensaje: "Revisa tu email para restablecer tu contrase√±a"<br>
                                ‚úì Si email no existe: mismo mensaje (no revelar)
                            </div>
                        </dd>

                        <dt>Validar BD:</dt>
                        <dd>
                            <div class="code-block">
SELECT * FROM user_tokens
WHERE usuario_id = X
AND tipo = 'reset_password'
AND usado = 0;
-- Debe existir 1 registro
-- expira_en > NOW()
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case AUTH-015 -->
                <div class="test-case">
                    <span class="test-id">AUTH-015</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Establecer nueva contrase√±a con token v√°lido</h5>

                    <dl class="test-details">
                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Click en link del email (con token v√°lido)</li>
                                    <li>Navegar a /reset-password/:token</li>
                                    <li>Ingresar nueva contrase√±a: "NewPass123!"</li>
                                    <li>Confirmar contrase√±a: "NewPass123!"</li>
                                    <li>Submit</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Contrase√±a actualizada y hasheada<br>
                                ‚úì Token marcado como usado<br>
                                ‚úì Mensaje: "Contrase√±a actualizada exitosamente"<br>
                                ‚úì Redirecci√≥n a /login<br>
                                ‚úì Login funcional con nueva contrase√±a<br>
                                ‚úì Email de confirmaci√≥n de cambio enviado<br>
                                ‚úì Todas las sesiones anteriores invalidadas
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case AUTH-016 -->
                <div class="test-case">
                    <span class="test-id">AUTH-016</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">Unitaria</span>
                    <h5>Token de reset expirado</h5>

                    <dl class="test-details">
                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Solicitar reset de password</li>
                                    <li>En BD, modificar token para que expire:
                                        <code>UPDATE user_tokens SET expira_en = NOW() - INTERVAL 1 HOUR</code>
                                    </li>
                                    <li>Intentar usar el token</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Error: "El token ha expirado"<br>
                                ‚úì Link para solicitar nuevo token<br>
                                ‚úì No se permite cambiar contrase√±a
                            </div>
                        </dd>
                    </dl>
                </div>

                <h3>1.5 Gesti√≥n de Sesi√≥n</h3>

                <!-- Test Case AUTH-017 -->
                <div class="test-case">
                    <span class="test-id">AUTH-017</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Persistencia de sesi√≥n al recargar p√°gina</h5>

                    <dl class="test-details">
                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Login exitoso</li>
                                    <li>Navegar a /pacientes</li>
                                    <li>Presionar F5 (recargar p√°gina)</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Usuario permanece autenticado<br>
                                ‚úì AuthContext mantiene datos del usuario<br>
                                ‚úì Permanece en /pacientes (no redirige a /login)<br>
                                ‚úì Header Authorization presente en todas las llamadas API
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case AUTH-018 -->
                <div class="test-case">
                    <span class="test-id">AUTH-018</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Unitaria</span>
                    <h5>Logout y limpieza de sesi√≥n</h5>

                    <dl class="test-details">
                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Usuario autenticado</li>
                                    <li>Click en "Cerrar Sesi√≥n"</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Token removido de localStorage<br>
                                ‚úì AuthContext reseteado (usuario = null)<br>
                                ‚úì Header Authorization removido de Axios<br>
                                ‚úì Redirecci√≥n a /login<br>
                                ‚úì Sesi√≥n marcada como cerrada en <code>user_sessions</code><br>
                                ‚úì Intentar acceder a rutas protegidas ‚Üí redirige a /login
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case AUTH-019 -->
                <div class="test-case">
                    <span class="test-id">AUTH-019</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Seguridad</span>
                    <h5>Protecci√≥n de rutas privadas</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>Verificar que rutas protegidas no son accesibles sin autenticaci√≥n</dd>

                        <dt>Rutas a probar (sin estar autenticado):</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>/dashboard</li>
                                    <li>/pacientes</li>
                                    <li>/citas</li>
                                    <li>/historial/:id</li>
                                    <li>/estetica</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Todas redirigen a /login<br>
                                ‚úì Mensaje: "Debes iniciar sesi√≥n"<br>
                                ‚úì Despu√©s del login, redirigir a ruta original (si se guard√≥)
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case AUTH-020 -->
                <div class="test-case">
                    <span class="test-id">AUTH-020</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">Seguridad</span>
                    <h5>Expiraci√≥n de JWT</h5>

                    <dl class="test-details">
                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Login exitoso (JWT v√°lido por 30 d√≠as)</li>
                                    <li>Modificar manualmente JWT para que expire:
                                        - Decodificar JWT
                                        - Cambiar "exp" a timestamp pasado
                                        - Re-codificar (sin firma v√°lida)
                                    </li>
                                    <li>Intentar hacer petici√≥n API</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Backend rechaza JWT expirado<br>
                                ‚úì Error HTTP 401 Unauthorized<br>
                                ‚úì Mensaje: "Token expirado"<br>
                                ‚úì Frontend intercepta el 401<br>
                                ‚úì Logout autom√°tico<br>
                                ‚úì Redirecci√≥n a /login con mensaje
                            </div>
                        </dd>
                    </dl>
                </div>

                <h3>1.6 Perfil de Usuario</h3>

                <!-- Test Case AUTH-021 -->
                <div class="test-case">
                    <span class="test-id">AUTH-021</span>
                    <span class="priority priority-medium">MEDIA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Obtener perfil de usuario autenticado</h5>

                    <dl class="test-details">
                        <dt>Endpoint:</dt>
                        <dd>GET /api/veterinarios/perfil</dd>

                        <dt>Headers:</dt>
                        <dd>Authorization: Bearer [JWT_TOKEN]</dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì HTTP 200 OK<br>
                                ‚úì JSON con datos del veterinario:
                                <div class="code-block">
{
  "id": 123,
  "nombre": "Dr. Juan P√©rez",
  "email": "juan.perez@vet.com",
  "rol": "doctor",
  "confirmado": true,
  "createdAt": "2025-01-15T10:30:00.000Z"
}
                                </div>
                                ‚úì Sin incluir password (nunca enviar password al frontend)
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Resumen de casos de autenticaci√≥n -->
                <div class="alert alert-success">
                    <h4>‚úÖ Resumen de Pruebas de Autenticaci√≥n</h4>
                    <ul class="checklist">
                        <li>Registro con validaciones completas</li>
                        <li>Confirmaci√≥n de cuenta v√≠a email</li>
                        <li>Login con JWT y gesti√≥n de sesi√≥n</li>
                        <li>Recuperaci√≥n de contrase√±a segura</li>
                        <li>Protecci√≥n contra ataques de fuerza bruta</li>
                        <li>Rutas protegidas correctamente</li>
                        <li>Expiraci√≥n y renovaci√≥n de tokens</li>
                        <li>Logout y limpieza de sesi√≥n</li>
                    </ul>
                    <p><strong>Total casos detallados: 21 | Casos adicionales a crear: 31</strong></p>
                </div>
            </section>

            <!-- M√ìDULO 2: PACIENTES -->
            <section id="pacientes" class="section">
                <div class="module-header">
                    <h2>üêæ M√≥dulo 2: Gesti√≥n de Pacientes y Propietarios</h2>
                </div>

                <div class="alert alert-danger">
                    <strong>‚ö†Ô∏è PRIORIDAD CR√çTICA:</strong> Los pacientes son el n√∫cleo del sistema. Errores aqu√≠ afectan todo el historial cl√≠nico, citas y facturaci√≥n.
                </div>

                <h3>2.1 Creaci√≥n de Pacientes</h3>

                <!-- Test Case PAT-001 -->
                <div class="test-case">
                    <span class="test-id">PAT-001</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Crear paciente nuevo con propietario nuevo</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>Verificar creaci√≥n completa de paciente + propietario + tel√©fono + direcci√≥n</dd>

                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Abrir modal "Nuevo Paciente" desde Dashboard o Pacientes</li>
                                    <li>Completar datos del paciente:
                                        - Nombre: "Max"
                                        - Especie: "Perro"
                                        - Raza: "Labrador"
                                        - Sexo: "Macho"
                                        - Fecha nacimiento: "2020-05-15"
                                        - Color: "Dorado"
                                        - Peso: "25.5"
                                    </li>
                                    <li>Completar datos del propietario:
                                        - Nombre: "Carlos Rodr√≠guez"
                                        - Email: "carlos@email.com"
                                        - Tel√©fono: "1234567890"
                                        - Direcci√≥n: "Calle Principal 123"
                                        - Colonia: "Centro"
                                        - Ciudad: "CDMX"
                                        - Estado: "Ciudad de M√©xico"
                                        - CP: "06000"
                                    </li>
                                    <li>Click "Guardar"</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Registro creado en tabla <code>propietarios</code><br>
                                ‚úì Registro creado en tabla <code>telefonos</code> asociado al propietario<br>
                                ‚úì Registro creado en tabla <code>direcciones</code> asociado al propietario<br>
                                ‚úì Registro creado en tabla <code>pacientes</code> con:
                                  - id_propietario correcto
                                  - id_doctor = usuario autenticado
                                  - estado = 'activo'<br>
                                ‚úì Toast: "Paciente registrado exitosamente"<br>
                                ‚úì Modal se cierra<br>
                                ‚úì Lista de pacientes se actualiza autom√°ticamente<br>
                                ‚úì Nuevo paciente visible en la tabla
                            </div>
                        </dd>

                        <dt>Validar BD:</dt>
                        <dd>
                            <div class="code-block">
-- Verificar propietario
SELECT * FROM propietarios WHERE email = 'carlos@email.com';

-- Verificar tel√©fono
SELECT * FROM telefonos WHERE id_propietario = [id];

-- Verificar direcci√≥n
SELECT * FROM direcciones WHERE id_propietario = [id];

-- Verificar paciente
SELECT * FROM pacientes
WHERE nombre = 'Max'
AND id_propietario = [id]
AND id_doctor = [id_doctor_actual];

-- Verificar relaci√≥n completa
SELECT p.*, prop.nombre AS propietario, t.numero AS telefono
FROM pacientes p
JOIN propietarios prop ON p.id_propietario = prop.id
LEFT JOIN telefonos t ON prop.id = t.id_propietario
WHERE p.nombre = 'Max';
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case PAT-002 -->
                <div class="test-case">
                    <span class="test-id">PAT-002</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Crear paciente con propietario existente</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>Verificar b√∫squeda de propietario y asociaci√≥n sin duplicar</dd>

                        <dt>Precondiciones:</dt>
                        <dd>Propietario "Carlos Rodr√≠guez" ya existe en BD</dd>

                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Abrir modal "Nuevo Paciente"</li>
                                    <li>Click en "Buscar propietario existente"</li>
                                    <li>Escribir "Carlos" en el buscador</li>
                                    <li>Seleccionar "Carlos Rodr√≠guez" de resultados</li>
                                    <li>Datos del propietario se autocompl etan</li>
                                    <li>Completar solo datos del paciente (nombre: "Luna")</li>
                                    <li>Guardar</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì NO se crea nuevo propietario<br>
                                ‚úì Paciente "Luna" asociado al propietario existente<br>
                                ‚úì Ambos pacientes ("Max" y "Luna") tienen el mismo id_propietario<br>
                                ‚úì Toast: "Paciente registrado exitosamente"<br>
                                ‚úì Validar: <code>SELECT COUNT(*) FROM pacientes WHERE id_propietario = X</code> ‚Üí 2
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case PAT-003 -->
                <div class="test-case">
                    <span class="test-id">PAT-003</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">Unitaria</span>
                    <h5>Validaci√≥n de campos obligatorios</h5>

                    <dl class="test-details">
                        <dt>Campos a validar:</dt>
                        <dd>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Campo</th>
                                        <th>Valor Inv√°lido</th>
                                        <th>Mensaje Esperado</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Nombre paciente</td>
                                        <td>(vac√≠o)</td>
                                        <td>‚ùå "El nombre es obligatorio"</td>
                                    </tr>
                                    <tr>
                                        <td>Especie</td>
                                        <td>(no seleccionada)</td>
                                        <td>‚ùå "Selecciona una especie"</td>
                                    </tr>
                                    <tr>
                                        <td>Raza</td>
                                        <td>(no seleccionada)</td>
                                        <td>‚ùå "Selecciona una raza"</td>
                                    </tr>
                                    <tr>
                                        <td>Sexo</td>
                                        <td>(no seleccionado)</td>
                                        <td>‚ùå "Selecciona el sexo"</td>
                                    </tr>
                                    <tr>
                                        <td>Nombre propietario</td>
                                        <td>(vac√≠o)</td>
                                        <td>‚ùå "El nombre del propietario es obligatorio"</td>
                                    </tr>
                                </tbody>
                            </table>
                        </dd>

                        <dt>Comportamiento:</dt>
                        <dd>
                            ‚úì Bot√≥n "Guardar" deshabilitado si faltan campos obligatorios<br>
                            ‚úì Campos con error resaltados en rojo<br>
                            ‚úì Mensajes de error visibles debajo de cada campo
                        </dd>
                    </dl>
                </div>

                <!-- Test Case PAT-004 -->
                <div class="test-case">
                    <span class="test-id">PAT-004</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">Unitaria</span>
                    <h5>Validaci√≥n de tipos de datos</h5>

                    <dl class="test-details">
                        <dt>Casos a probar:</dt>
                        <dd>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Campo</th>
                                        <th>Valor</th>
                                        <th>Resultado</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Peso</td>
                                        <td>"abc"</td>
                                        <td>‚ùå "Debe ser un n√∫mero"</td>
                                    </tr>
                                    <tr>
                                        <td>Peso</td>
                                        <td>"-5"</td>
                                        <td>‚ùå "Debe ser mayor a 0"</td>
                                    </tr>
                                    <tr>
                                        <td>Peso</td>
                                        <td>"25.5"</td>
                                        <td>‚úÖ Aceptado</td>
                                    </tr>
                                    <tr>
                                        <td>Email</td>
                                        <td>"invalido"</td>
                                        <td>‚ùå "Email inv√°lido"</td>
                                    </tr>
                                    <tr>
                                        <td>Email</td>
                                        <td>"test@test.com"</td>
                                        <td>‚úÖ Aceptado</td>
                                    </tr>
                                    <tr>
                                        <td>Tel√©fono</td>
                                        <td>"12345"</td>
                                        <td>‚ùå "M√≠nimo 10 d√≠gitos"</td>
                                    </tr>
                                    <tr>
                                        <td>Tel√©fono</td>
                                        <td>"1234567890"</td>
                                        <td>‚úÖ Aceptado</td>
                                    </tr>
                                    <tr>
                                        <td>Fecha nacimiento</td>
                                        <td>2030-01-01</td>
                                        <td>‚ùå "Fecha no puede ser futura"</td>
                                    </tr>
                                </tbody>
                            </table>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case PAT-005 -->
                <div class="test-case">
                    <span class="test-id">PAT-005</span>
                    <span class="priority priority-medium">MEDIA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>C√°lculo autom√°tico de edad</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>La edad se debe calcular autom√°ticamente basada en la fecha de nacimiento</dd>

                        <dt>Casos:</dt>
                        <dd>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Fecha Nacimiento</th>
                                        <th>Fecha Actual</th>
                                        <th>Edad Esperada</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>2023-11-13</td>
                                        <td>2025-11-13</td>
                                        <td>"2 a√±os"</td>
                                    </tr>
                                    <tr>
                                        <td>2025-05-13</td>
                                        <td>2025-11-13</td>
                                        <td>"6 meses"</td>
                                    </tr>
                                    <tr>
                                        <td>2025-10-13</td>
                                        <td>2025-11-13</td>
                                        <td>"1 mes"</td>
                                    </tr>
                                </tbody>
                            </table>
                        </dd>
                    </dl>
                </div>

                <h3>2.2 Listado y B√∫squeda de Pacientes</h3>

                <!-- Test Case PAT-006 -->
                <div class="test-case">
                    <span class="test-id">PAT-006</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Listar pacientes del doctor autenticado</h5>

                    <dl class="test-details">
                        <dt>Precondiciones:</dt>
                        <dd>
                            - Doctor A tiene 5 pacientes<br>
                            - Doctor B tiene 3 pacientes<br>
                            - Usuario autenticado como Doctor A
                        </dd>

                        <dt>Endpoint:</dt>
                        <dd>GET /api/pacientes</dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì HTTP 200 OK<br>
                                ‚úì Array con 5 pacientes (solo del Doctor A)<br>
                                ‚úì NO incluye pacientes del Doctor B<br>
                                ‚úì Cada paciente incluye datos del propietario<br>
                                ‚úì Ordenados por fecha de registro (m√°s recientes primero)
                            </div>
                        </dd>

                        <dt>Validar SQL:</dt>
                        <dd>
                            <div class="code-block">
SELECT p.*, prop.nombre AS nombre_propietario
FROM pacientes p
JOIN propietarios prop ON p.id_propietario = prop.id
WHERE p.id_doctor = [id_doctor_autenticado]
AND p.estado = 'activo'
ORDER BY p.createdAt DESC;
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case PAT-007 -->
                <div class="test-case">
                    <span class="test-id">PAT-007</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>B√∫squeda de pacientes por nombre</h5>

                    <dl class="test-details">
                        <dt>Casos:</dt>
                        <dd>
                            <table>
                                <thead>
                                    <tr>
                                        <th>B√∫squeda</th>
                                        <th>Pacientes en BD</th>
                                        <th>Resultados Esperados</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>"max"</td>
                                        <td>Max, Maximus, Luna</td>
                                        <td>Max, Maximus</td>
                                    </tr>
                                    <tr>
                                        <td>"MAX"</td>
                                        <td>Max, Maximus, Luna</td>
                                        <td>Max, Maximus (case-insensitive)</td>
                                    </tr>
                                    <tr>
                                        <td>"inexistente"</td>
                                        <td>Max, Luna</td>
                                        <td>(vac√≠o) + mensaje "No se encontraron pacientes"</td>
                                    </tr>
                                </tbody>
                            </table>
                        </dd>

                        <dt>Comportamiento UI:</dt>
                        <dd>
                            ‚úì B√∫squeda con debounce (esperar 300ms despu√©s de teclear)<br>
                            ‚úì Mostrar loading indicator mientras busca<br>
                            ‚úì Limpiar resultados al borrar b√∫squeda
                        </dd>
                    </dl>
                </div>

                <!-- Test Case PAT-008 -->
                <div class="test-case">
                    <span class="test-id">PAT-008</span>
                    <span class="priority priority-medium">MEDIA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Patient Spotlight (Cmd+K / Ctrl+K)</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>B√∫squeda r√°pida global de pacientes con atajo de teclado</dd>

                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Estar en cualquier p√°gina del sistema</li>
                                    <li>Presionar Cmd+K (Mac) o Ctrl+K (Windows)</li>
                                    <li>Modal de b√∫squeda aparece</li>
                                    <li>Escribir nombre de paciente</li>
                                    <li>Navegar con flechas ‚Üë‚Üì</li>
                                    <li>Presionar Enter o click en resultado</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Modal aparece con animaci√≥n (150ms)<br>
                                ‚úì B√∫squeda en tiempo real<br>
                                ‚úì Muestra foto, nombre, especie, propietario<br>
                                ‚úì Al seleccionar ‚Üí cierra modal y abre historial del paciente<br>
                                ‚úì ESC cierra el modal<br>
                                ‚úì Click fuera cierra el modal
                            </div>
                        </dd>
                    </dl>
                </div>

                <h3>2.3 Actualizaci√≥n de Pacientes</h3>

                <!-- Test Case PAT-009 -->
                <div class="test-case">
                    <span class="test-id">PAT-009</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Actualizar datos del paciente</h5>

                    <dl class="test-details">
                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Abrir modal de edici√≥n de paciente existente</li>
                                    <li>Modificar peso de 25.5 a 28.0</li>
                                    <li>Modificar color de "Dorado" a "Caf√© claro"</li>
                                    <li>Guardar cambios</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Registro actualizado en BD<br>
                                ‚úì Campo <code>updatedAt</code> actualizado<br>
                                ‚úì Toast: "Paciente actualizado exitosamente"<br>
                                ‚úì Lista de pacientes refleja cambios sin recargar p√°gina<br>
                                ‚úì Historial de cambios registrado en audit_logs
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case PAT-010 -->
                <div class="test-case">
                    <span class="test-id">PAT-010</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Actualizar datos del propietario</h5>

                    <dl class="test-details">
                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Ver perfil de paciente</li>
                                    <li>Click en "Editar Propietario"</li>
                                    <li>Cambiar tel√©fono de 1234567890 a 9876543210</li>
                                    <li>Agregar email: nuevoemail@test.com</li>
                                    <li>Guardar</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Propietario actualizado en tabla <code>propietarios</code><br>
                                ‚úì Tel√©fono actualizado en tabla <code>telefonos</code><br>
                                ‚úì Cambios reflejados en TODOS los pacientes del mismo propietario<br>
                                ‚úì Toast: "Propietario actualizado"
                            </div>
                        </dd>

                        <dt>Validar impacto:</dt>
                        <dd>
                            Si propietario tiene 2 mascotas (Max y Luna), al cambiar su tel√©fono, ambas mascotas deben mostrar el nuevo tel√©fono.
                        </dd>
                    </dl>
                </div>

                <h3>2.4 Eliminaci√≥n de Pacientes</h3>

                <!-- Test Case PAT-011 -->
                <div class="test-case">
                    <span class="test-id">PAT-011</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Eliminaci√≥n l√≥gica (soft delete)</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>Los pacientes NO se eliminan f√≠sicamente, solo cambian estado a "inactivo"</dd>

                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Click en "Eliminar" en tarjeta de paciente</li>
                                    <li>Confirmar en di√°logo: "¬øSeguro que deseas eliminar a [Nombre]?"</li>
                                    <li>Click "Confirmar"</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Campo <code>estado</code> cambia de "activo" a "inactivo"<br>
                                ‚úì Paciente desaparece de lista principal<br>
                                ‚úì Paciente NO es eliminado f√≠sicamente (DELETE)<br>
                                ‚úì Historial cl√≠nico se mantiene intacto<br>
                                ‚úì Citas pasadas se mantienen<br>
                                ‚úì Citas futuras se cancelan autom√°ticamente<br>
                                ‚úì Toast: "Paciente eliminado"<br>
                                ‚úì Puede ser reactivado posteriormente
                            </div>
                        </dd>

                        <dt>Validar BD:</dt>
                        <dd>
                            <div class="code-block">
-- Verificar soft delete
SELECT id, nombre, estado FROM pacientes WHERE id = [id];
-- estado debe ser 'inactivo'

-- Verificar que citas futuras se cancelaron
SELECT * FROM citas
WHERE id_paciente = [id]
AND fecha > NOW();
-- Todas deben tener estado = 'cancelada'
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case PAT-012 -->
                <div class="test-case">
                    <span class="test-id">PAT-012</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">Seguridad</span>
                    <h5>Prevenir eliminaci√≥n con citas activas</h5>

                    <dl class="test-details">
                        <dt>Precondiciones:</dt>
                        <dd>Paciente tiene cita programada para ma√±ana</dd>

                        <dt>Pasos:</dt>
                        <dd>Intentar eliminar el paciente</dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Di√°logo de advertencia: "Este paciente tiene citas pendientes. Se cancelar√°n autom√°ticamente."<br>
                                ‚úì Opciones: "Cancelar" o "Eliminar de todas formas"<br>
                                ‚úì Si confirma ‚Üí elimina y cancela citas<br>
                                ‚úì Si cancela ‚Üí no hace nada
                            </div>
                        </dd>
                    </dl>
                </div>

                <h3>2.5 Transferencia de Mascotas</h3>

                <!-- Test Case PAT-013 -->
                <div class="test-case">
                    <span class="test-id">PAT-013</span>
                    <span class="priority priority-medium">MEDIA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Transferir mascota a otro propietario</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>Cambiar de due√±o una mascota (ej: adopci√≥n)</dd>

                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Abrir perfil del paciente "Max"</li>
                                    <li>Click en "Transferir Mascota"</li>
                                    <li>Buscar nuevo propietario: "Ana Garc√≠a"</li>
                                    <li>Confirmar transferencia</li>
                                    <li>Ingresar motivo: "Adopci√≥n"</li>
                                    <li>Guardar</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Campo <code>id_propietario</code> actualizado en paciente<br>
                                ‚úì Historial de transferencia registrado<br>
                                ‚úì Nota en historial cl√≠nico: "Transferido de [propietario anterior] a [propietario nuevo]"<br>
                                ‚úì Propietario anterior a√∫n puede ver historial (solo lectura)<br>
                                ‚úì Toast: "Mascota transferida exitosamente"
                            </div>
                        </dd>
                    </dl>
                </div>

                <h3>2.6 Gesti√≥n de Razas y Especies</h3>

                <!-- Test Case PAT-014 -->
                <div class="test-case">
                    <span class="test-id">PAT-014</span>
                    <span class="priority priority-medium">MEDIA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Cargar razas por especie seleccionada</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>Al seleccionar especie, dropdown de razas debe filtrar correctamente</dd>

                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Abrir modal nuevo paciente</li>
                                    <li>Seleccionar especie: "Perro"</li>
                                    <li>Abrir dropdown de razas</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Llamada a GET /api/pacientes/razas?especie=Perro<br>
                                ‚úì Solo razas de perro mostradas (Labrador, Pastor Alem√°n, etc.)<br>
                                ‚úì NO mostrar razas de gato<br>
                                ‚úì Ordenadas alfab√©ticamente<br>
                                ‚úì Si cambia especie a "Gato" ‚Üí razas se recargan
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Resumen -->
                <div class="alert alert-success">
                    <h4>‚úÖ Resumen de Pruebas de Pacientes</h4>
                    <ul class="checklist">
                        <li>Creaci√≥n de pacientes con propietarios nuevos y existentes</li>
                        <li>Validaciones completas de campos</li>
                        <li>B√∫squeda y filtrado (incluye Patient Spotlight)</li>
                        <li>Actualizaci√≥n de pacientes y propietarios</li>
                        <li>Eliminaci√≥n l√≥gica (soft delete)</li>
                        <li>Transferencia de mascotas entre propietarios</li>
                        <li>Gesti√≥n de razas por especie</li>
                        <li>Seguridad: solo ver pacientes del doctor autenticado</li>
                    </ul>
                    <p><strong>Total casos detallados: 14 | Casos adicionales a crear: 51</strong></p>
                </div>
            </section>

            <!-- M√ìDULO 3: CITAS M√âDICAS -->
            <section id="citas" class="section">
                <div class="module-header">
                    <h2>üìÖ M√≥dulo 3: Gesti√≥n de Citas M√©dicas</h2>
                </div>

                <div class="alert alert-danger">
                    <strong>‚ö†Ô∏è PRIORIDAD CR√çTICA:</strong> Las citas m√©dicas deben ser 100% confiables. Errores pueden causar doble reserva, p√©rdida de informaci√≥n y problemas de agenda.
                </div>

                <h3>3.1 Creaci√≥n de Citas</h3>

                <!-- Test Case CIT-001 -->
                <div class="test-case">
                    <span class="test-id">CIT-001</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Crear cita nueva con datos v√°lidos</h5>

                    <dl class="test-details">
                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Click "Nueva Cita" desde Dashboard o Citas</li>
                                    <li>Seleccionar paciente: "Max"</li>
                                    <li>Seleccionar fecha: ma√±ana</li>
                                    <li>Seleccionar hora: 10:00 AM</li>
                                    <li>Tipo: "Primera vez"</li>
                                    <li>Motivo: "Vacunaci√≥n antirr√°bica"</li>
                                    <li>Duraci√≥n: 30 min</li>
                                    <li>Guardar</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Cita creada en BD con estado "programada"<br>
                                ‚úì Email de confirmaci√≥n enviado al propietario<br>
                                ‚úì Archivo .ics (calendario) incluido en email<br>
                                ‚úì Cita visible en CalendarView<br>
                                ‚úì Recordatorio autom√°tico programado para 24h antes<br>
                                ‚úì Toast: "Cita agendada exitosamente"<br>
                                ‚úì Modal se cierra y lista se actualiza
                            </div>
                        </dd>

                        <dt>Validar BD:</dt>
                        <dd>
                            <div class="code-block">
SELECT * FROM citas WHERE id_paciente = [id] ORDER BY createdAt DESC LIMIT 1;
-- estado = 'programada'
-- tipo = 'primera_vez'
-- fecha correcta
-- hora correcta
-- id_doctor = doctor autenticado

SELECT * FROM recordatorios WHERE id_cita = [id_cita];
-- Debe existir recordatorio programado
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case CIT-002 -->
                <div class="test-case">
                    <span class="test-id">CIT-002</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Verificaci√≥n de disponibilidad de horario</h5>

                    <dl class="test-details">
                        <dt>Precondiciones:</dt>
                        <dd>Ya existe cita para ma√±ana a las 10:00 AM</dd>

                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Intentar crear nueva cita</li>
                                    <li>Seleccionar misma fecha y hora (ma√±ana 10:00 AM)</li>
                                    <li>Intentar guardar</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Error: "Ya existe una cita a esta hora"<br>
                                ‚úì Sugerencia de horarios disponibles cercanos<br>
                                ‚úì No se crea la cita<br>
                                ‚úì Usuario puede seleccionar otro horario
                            </div>
                        </dd>

                        <dt>Endpoint de validaci√≥n:</dt>
                        <dd>GET /api/citas/disponibilidad?fecha=2025-11-14&hora=10:00</dd>
                    </dl>
                </div>

                <!-- Test Case CIT-003 -->
                <div class="test-case">
                    <span class="test-id">CIT-003</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Mostrar horarios disponibles del d√≠a</h5>

                    <dl class="test-details">
                        <dt>Precondiciones:</dt>
                        <dd>
                            Horarios de trabajo: 9:00 AM - 6:00 PM<br>
                            Citas existentes: 10:00 AM, 2:00 PM
                        </dd>

                        <dt>Endpoint:</dt>
                        <dd>GET /api/citas/horarios-disponibles?fecha=2025-11-14</dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Array de horarios disponibles:
                                <div class="code-block">
[
  "09:00", "09:30", "11:00", "11:30",
  "12:00", "12:30", "01:00", "01:30",
  "03:00", "03:30", "04:00", "04:30",
  "05:00", "05:30"
]
                                </div>
                                ‚úì NO incluye 10:00 AM ni 2:00 PM (ocupados)<br>
                                ‚úì Intervalos de 30 minutos<br>
                                ‚úì Solo dentro de horario laboral
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case CIT-004 -->
                <div class="test-case">
                    <span class="test-id">CIT-004</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">Unitaria</span>
                    <h5>Validaci√≥n de fecha no pasada</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>No permitir crear citas en fechas pasadas</dd>

                        <dt>Casos:</dt>
                        <dd>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Fecha</th>
                                        <th>Resultado</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Ayer</td>
                                        <td>‚ùå "No puedes agendar citas en fechas pasadas"</td>
                                    </tr>
                                    <tr>
                                        <td>Hoy (hora pasada)</td>
                                        <td>‚ùå "No puedes agendar citas en horas pasadas"</td>
                                    </tr>
                                    <tr>
                                        <td>Hoy (hora futura)</td>
                                        <td>‚úÖ Permitido</td>
                                    </tr>
                                    <tr>
                                        <td>Ma√±ana</td>
                                        <td>‚úÖ Permitido</td>
                                    </tr>
                                </tbody>
                            </table>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case CIT-005 -->
                <div class="test-case">
                    <span class="test-id">CIT-005</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Cita de urgencia (prioridad alta)</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>Citas de urgencia pueden sobreescribir horarios (con confirmaci√≥n)</dd>

                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Click en "Urgencia" desde dashboard</li>
                                    <li>Seleccionar paciente</li>
                                    <li>Tipo autom√°tico: "urgencia"</li>
                                    <li>Seleccionar hora ocupada (ej: 10:00 AM)</li>
                                    <li>Sistema advierte: "Hora ocupada. ¬øAgendar de todas formas?"</li>
                                    <li>Confirmar</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Cita creada con tipo "urgencia"<br>
                                ‚úì Marcada con prioridad alta en calendario (color rojo)<br>
                                ‚úì Email enviado al propietario<br>
                                ‚úì Notificaci√≥n interna al doctor<br>
                                ‚úì Puede coexistir con otra cita en mismo horario (doble reserva permitida solo para urgencias)
                            </div>
                        </dd>
                    </dl>
                </div>

                <h3>3.2 Gesti√≥n de Estados de Citas</h3>

                <!-- Test Case CIT-006 -->
                <div class="test-case">
                    <span class="test-id">CIT-006</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Flujo completo de estados</h5>

                    <dl class="test-details">
                        <dt>Estados posibles:</dt>
                        <dd>programada ‚Üí confirmada ‚Üí en_curso ‚Üí completada</dd>

                        <dt>Flujo a probar:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Crear cita (estado: "programada")</li>
                                    <li>Confirmar cita ‚Üí estado: "confirmada"</li>
                                    <li>Iniciar consulta ‚Üí estado: "en_curso"</li>
                                    <li>Completar consulta ‚Üí estado: "completada"</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado para cada cambio:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Estado actualizado en BD<br>
                                ‚úì Timestamp del cambio registrado<br>
                                ‚úì Color de badge actualizado en UI<br>
                                ‚úì Email enviado al propietario (solo para confirmada y completada)<br>
                                ‚úì Audit log de cada cambio
                            </div>
                        </dd>

                        <dt>Colores de badges:</dt>
                        <dd>
                            - programada: gris<br>
                            - confirmada: azul<br>
                            - en_curso: amarillo<br>
                            - completada: verde<br>
                            - cancelada: rojo<br>
                            - no_asistio: naranja
                        </dd>
                    </dl>
                </div>

                <!-- Test Case CIT-007 -->
                <div class="test-case">
                    <span class="test-id">CIT-007</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Cancelaci√≥n de cita</h5>

                    <dl class="test-details">
                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Seleccionar cita programada/confirmada</li>
                                    <li>Click "Cancelar"</li>
                                    <li>Ingresar motivo: "Cliente cancel√≥"</li>
                                    <li>Confirmar</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Estado cambiado a "cancelada"<br>
                                ‚úì Motivo de cancelaci√≥n guardado<br>
                                ‚úì Email de cancelaci√≥n enviado al propietario<br>
                                ‚úì Recordatorio autom√°tico cancelado<br>
                                ‚úì Horario liberado (disponible nuevamente)<br>
                                ‚úì NO se elimina la cita de BD
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case CIT-008 -->
                <div class="test-case">
                    <span class="test-id">CIT-008</span>
                    <span class="priority priority-medium">MEDIA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Marcar como "No asisti√≥"</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>Registrar cuando un paciente no asiste a cita confirmada</dd>

                        <dt>Precondiciones:</dt>
                        <dd>Cita confirmada para ayer a las 10:00 AM</dd>

                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Abrir lista de citas</li>
                                    <li>Seleccionar cita de ayer</li>
                                    <li>Click "No asisti√≥"</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Estado: "no_asistio"<br>
                                ‚úì Incrementar contador de inasistencias del paciente<br>
                                ‚úì Si tiene 3+ inasistencias ‚Üí advertencia al agendar siguiente cita<br>
                                ‚úì Registro en estad√≠sticas de citas
                            </div>
                        </dd>
                    </dl>
                </div>

                <h3>3.3 Vista de Calendario</h3>

                <!-- Test Case CIT-009 -->
                <div class="test-case">
                    <span class="test-id">CIT-009</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Visualizaci√≥n de citas en calendario mensual</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>Calendario debe mostrar todas las citas del mes correctamente</dd>

                        <dt>Datos de prueba:</dt>
                        <dd>
                            - 5 citas el d√≠a 15<br>
                            - 2 citas el d√≠a 20<br>
                            - 0 citas el d√≠a 25
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì D√≠a 15 muestra indicador "5 citas"<br>
                                ‚úì D√≠a 20 muestra indicador "2 citas"<br>
                                ‚úì D√≠a 25 sin indicadores<br>
                                ‚úì Click en d√≠a ‚Üí muestra detalle de citas<br>
                                ‚úì Colores por tipo de cita:<br>
                                  - Primera vez: azul<br>
                                  - Seguimiento: verde<br>
                                  - Urgencia: rojo<br>
                                  - Vacunaci√≥n: morado
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case CIT-010 -->
                <div class="test-case">
                    <span class="test-id">CIT-010</span>
                    <span class="priority priority-medium">MEDIA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Navegaci√≥n entre meses</h5>

                    <dl class="test-details">
                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Abrir calendario (mes actual: Noviembre 2025)</li>
                                    <li>Click en "‚Üí" (mes siguiente)</li>
                                    <li>Verificar que muestra Diciembre 2025</li>
                                    <li>Click en "‚Üê" (mes anterior)</li>
                                    <li>Verificar que vuelve a Noviembre</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Citas se cargan correctamente para cada mes<br>
                                ‚úì Llamada API: GET /api/citas/fecha/:mes<br>
                                ‚úì Loading state mientras carga<br>
                                ‚úì D√≠as del mes correcto (28-31 seg√∫n mes)<br>
                                ‚úì Primer d√≠a de la semana correcto
                            </div>
                        </dd>
                    </dl>
                </div>

                <h3>3.4 Recordatorios y Notificaciones</h3>

                <!-- Test Case CIT-011 -->
                <div class="test-case">
                    <span class="test-id">CIT-011</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Recordatorio autom√°tico 24h antes</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>Sistema debe enviar email autom√°tico 24h antes de la cita</dd>

                        <dt>Setup:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Crear cita para ma√±ana a las 10:00 AM</li>
                                    <li>Esperar a que el cron job ejecute (cada hora)</li>
                                    <li>O ejecutar manualmente: node backend/jobs/reminderJobs.js</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Email enviado al propietario con:<br>
                                  - Nombre del paciente<br>
                                  - Fecha y hora de la cita<br>
                                  - Motivo<br>
                                  - Instrucciones (ej: venir en ayunas)<br>
                                  - Link para cancelar/reprogramar<br>
                                ‚úì Recordatorio marcado como enviado en BD<br>
                                ‚úì Log en system_logs
                            </div>
                        </dd>

                        <dt>Validar BD:</dt>
                        <dd>
                            <div class="code-block">
SELECT * FROM recordatorios WHERE id_cita = [id];
-- enviado = 1
-- fecha_envio = NOW()
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case CIT-012 -->
                <div class="test-case">
                    <span class="test-id">CIT-012</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Email de confirmaci√≥n al crear cita</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>Al crear una cita, enviar email de confirmaci√≥n inmediatamente</dd>

                        <dt>Contenido del email esperado:</dt>
                        <dd>
                            ‚úì Asunto: "Cita confirmada para [Nombre Paciente]"<br>
                            ‚úì Saludo personalizado<br>
                            ‚úì Detalles de la cita (fecha, hora, motivo)<br>
                            ‚úì Datos del veterinario<br>
                            ‚úì Direcci√≥n de la cl√≠nica<br>
                            ‚úì Archivo .ics adjunto para agregar a calendario<br>
                            ‚úì Links: Cancelar | Reprogramar
                        </dd>
                    </dl>
                </div>

                <h3>3.5 B√∫squeda y Filtrado</h3>

                <!-- Test Case CIT-013 -->
                <div class="test-case">
                    <span class="test-id">CIT-013</span>
                    <span class="priority priority-medium">MEDIA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Filtrar citas por estado</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>Dropdown de filtro debe permitir ver solo citas de cierto estado</dd>

                        <dt>Casos:</dt>
                        <dd>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Filtro</th>
                                        <th>Resultado</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Todas</td>
                                        <td>Mostrar todas las citas</td>
                                    </tr>
                                    <tr>
                                        <td>Programadas</td>
                                        <td>Solo estado = 'programada'</td>
                                    </tr>
                                    <tr>
                                        <td>Confirmadas</td>
                                        <td>Solo estado = 'confirmada'</td>
                                    </tr>
                                    <tr>
                                        <td>Completadas</td>
                                        <td>Solo estado = 'completada'</td>
                                    </tr>
                                    <tr>
                                        <td>Canceladas</td>
                                        <td>Solo estado = 'cancelada'</td>
                                    </tr>
                                </tbody>
                            </table>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case CIT-014 -->
                <div class="test-case">
                    <span class="test-id">CIT-014</span>
                    <span class="priority priority-medium">MEDIA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Filtrar citas por rango de fechas</h5>

                    <dl class="test-details">
                        <dt>Endpoint:</dt>
                        <dd>GET /api/citas/rango?inicio=2025-11-01&fin=2025-11-30</dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Solo citas entre Nov 1 y Nov 30<br>
                                ‚úì Ordenadas por fecha y hora<br>
                                ‚úì Incluye todas las del rango (sin l√≠mite)
                            </div>
                        </dd>
                    </dl>
                </div>

                <h3>3.6 Estad√≠sticas</h3>

                <!-- Test Case CIT-015 -->
                <div class="test-case">
                    <span class="test-id">CIT-015</span>
                    <span class="priority priority-medium">MEDIA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Obtener estad√≠sticas de citas</h5>

                    <dl class="test-details">
                        <dt>Endpoint:</dt>
                        <dd>GET /api/citas/estadisticas?mes=11&anio=2025</dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì JSON con:
                                <div class="code-block">
{
  "total": 45,
  "programadas": 10,
  "confirmadas": 15,
  "completadas": 18,
  "canceladas": 2,
  "no_asistio": 0,
  "porcentaje_asistencia": 90,
  "citas_por_dia": {
    "lunes": 8,
    "martes": 10,
    "mi√©rcoles": 7,
    ...
  },
  "tipos": {
    "primera_vez": 12,
    "seguimiento": 20,
    "urgencia": 3,
    "vacunacion": 10
  }
}
                                </div>
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Resumen -->
                <div class="alert alert-success">
                    <h4>‚úÖ Resumen de Pruebas de Citas</h4>
                    <ul class="checklist">
                        <li>Creaci√≥n de citas con validaci√≥n de disponibilidad</li>
                        <li>Gesti√≥n completa de estados (6 estados)</li>
                        <li>Citas de urgencia con prioridad</li>
                        <li>Vista de calendario interactiva</li>
                        <li>Recordatorios autom√°ticos 24h antes</li>
                        <li>Emails de confirmaci√≥n y cancelaci√≥n</li>
                        <li>B√∫squeda y filtrado avanzado</li>
                        <li>Estad√≠sticas y reportes</li>
                        <li>Archivos .ics para calendarios externos</li>
                    </ul>
                    <p><strong>Total casos detallados: 15 | Casos adicionales a crear: 47</strong></p>
                </div>
            </section>

            <!-- M√ìDULO 4: HISTORIAL CL√çNICO -->
            <section id="historial" class="section">
                <div class="module-header">
                    <h2>üìã M√≥dulo 4: Historial Cl√≠nico Completo</h2>
                </div>

                <div class="alert alert-danger">
                    <strong>‚ö†Ô∏è PRIORIDAD CR√çTICA:</strong> El historial cl√≠nico es el coraz√≥n del sistema. Debe ser 100% preciso, completo e inalterable. Errores aqu√≠ pueden tener consecuencias m√©dicas y legales graves.
                </div>

                <h3>4.1 Consultas M√©dicas</h3>

                <!-- Test Case HIST-001 -->
                <div class="test-case">
                    <span class="test-id">HIST-001</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Crear consulta m√©dica completa con signos vitales</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>Registrar una consulta m√©dica con todos los signos vitales y detalles</dd>

                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Abrir historial cl√≠nico del paciente "Max"</li>
                                    <li>Click en "Nueva Consulta"</li>
                                    <li>Completar datos:
                                        - Motivo: "Control de rutina"
                                        - Peso: 28.0 kg
                                        - Temperatura: 38.5¬∞C
                                        - Frecuencia card√≠aca: 100 bpm
                                        - Frecuencia respiratoria: 30 rpm
                                        - Presi√≥n arterial: 120/80 mmHg
                                        - Tiempo llenado capilar: 2 seg
                                        - Nivel de dolor: 0/10
                                        - Condici√≥n corporal: "Ideal"
                                        - Estado de hidrataci√≥n: "Bien hidratado"
                                        - Diagn√≥stico: "Paciente sano"
                                        - Tratamiento: "Continuar dieta actual"
                                    </li>
                                    <li>Guardar consulta</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Registro creado en tabla <code>historias_clinicas</code><br>
                                ‚úì Todos los signos vitales guardados correctamente<br>
                                ‚úì Timestamp de creaci√≥n registrado<br>
                                ‚úì id_doctor = doctor autenticado<br>
                                ‚úì Consulta visible en timeline del historial<br>
                                ‚úì Toast: "Consulta registrada exitosamente"<br>
                                ‚úì Si vino de cita ‚Üí estado de cita cambia a "completada"<br>
                                ‚úì Peso registrado en gr√°fica de evoluci√≥n
                            </div>
                        </dd>

                        <dt>Validar BD:</dt>
                        <dd>
                            <div class="code-block">
SELECT * FROM historias_clinicas
WHERE id_paciente = [id]
ORDER BY fecha DESC LIMIT 1;

-- Verificar todos los campos
-- peso = 28.0
-- temperatura = 38.5
-- frecuencia_cardiaca = 100
-- etc.
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case HIST-002 -->
                <div class="test-case">
                    <span class="test-id">HIST-002</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">Unitaria</span>
                    <h5>Validaci√≥n de rangos de signos vitales</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>Sistema debe validar que signos vitales est√©n en rangos razonables</dd>

                        <dt>Casos a probar:</dt>
                        <dd>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Campo</th>
                                        <th>Valor</th>
                                        <th>Resultado</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Temperatura</td>
                                        <td>50¬∞C</td>
                                        <td>‚ö†Ô∏è Advertencia: "Temperatura anormal (50¬∞C). ¬øConfirmar?"</td>
                                    </tr>
                                    <tr>
                                        <td>Temperatura</td>
                                        <td>38.5¬∞C</td>
                                        <td>‚úÖ Normal</td>
                                    </tr>
                                    <tr>
                                        <td>Peso</td>
                                        <td>-5 kg</td>
                                        <td>‚ùå "El peso debe ser mayor a 0"</td>
                                    </tr>
                                    <tr>
                                        <td>Frecuencia card√≠aca</td>
                                        <td>300 bpm</td>
                                        <td>‚ö†Ô∏è Advertencia: "Frecuencia muy alta. ¬øConfirmar?"</td>
                                    </tr>
                                    <tr>
                                        <td>Nivel de dolor</td>
                                        <td>15</td>
                                        <td>‚ùå "Debe estar entre 0 y 10"</td>
                                    </tr>
                                </tbody>
                            </table>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case HIST-003 -->
                <div class="test-case">
                    <span class="test-id">HIST-003</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Edici√≥n inline de consulta</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>Permitir editar consulta despu√©s de creada (con registro de auditor√≠a)</dd>

                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Abrir historial cl√≠nico</li>
                                    <li>Click en icono de edici√≥n en consulta reciente</li>
                                    <li>Modificar diagn√≥stico: "Paciente sano" ‚Üí "Dermatitis leve"</li>
                                    <li>Agregar nota: "Prescribir crema t√≥pica"</li>
                                    <li>Guardar cambios</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Consulta actualizada en BD<br>
                                ‚úì Campo <code>updatedAt</code> actualizado<br>
                                ‚úì Registro en <code>audit_logs</code>:
                                  - usuario que edit√≥
                                  - timestamp
                                  - campos modificados (before/after)<br>
                                ‚úì Indicador visual de "Editado" en la consulta<br>
                                ‚úì Solo el doctor que cre√≥ la consulta puede editarla (o admin)<br>
                                ‚úì Tiempo l√≠mite: solo editable dentro de 24h de creaci√≥n
                            </div>
                        </dd>
                    </dl>
                </div>

                <h3>4.2 Vacunas</h3>

                <!-- Test Case HIST-004 -->
                <div class="test-case">
                    <span class="test-id">HIST-004</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Registrar vacuna con pr√≥xima dosis</h5>

                    <dl class="test-details">
                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>En historial, click "Agregar Vacuna"</li>
                                    <li>Seleccionar vacuna: "Antirr√°bica"</li>
                                    <li>Fecha aplicaci√≥n: Hoy</li>
                                    <li>Lote: "ABC123"</li>
                                    <li>Pr√≥xima dosis: +1 a√±o</li>
                                    <li>Guardar</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Vacuna registrada en tabla <code>vacunas</code><br>
                                ‚úì Pr√≥xima dosis calculada: hoy + 365 d√≠as<br>
                                ‚úì Recordatorio creado para pr√≥xima dosis (15 d√≠as antes)<br>
                                ‚úì Badge en timeline: "Vacuna aplicada"<br>
                                ‚úì Si la cita era de tipo "vacunacion" ‚Üí cita completada<br>
                                ‚úì Certificado de vacunaci√≥n generado (PDF)
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case HIST-005 -->
                <div class="test-case">
                    <span class="test-id">HIST-005</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Alertas de vacunas vencidas</h5>

                    <dl class="test-details">
                        <dt>Precondiciones:</dt>
                        <dd>Paciente tiene vacuna antirr√°bica con pr√≥xima dosis hace 1 mes</dd>

                        <dt>Comportamiento esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Al abrir historial ‚Üí banner rojo: "‚ö†Ô∏è Vacuna antirr√°bica vencida"<br>
                                ‚úì En lista de pacientes ‚Üí indicador visual de vacuna pendiente<br>
                                ‚úì Dashboard ‚Üí contador de "Vacunas pendientes: 1"<br>
                                ‚úì Email autom√°tico al propietario (enviado 15 d√≠as antes del vencimiento)
                            </div>
                        </dd>
                    </dl>
                </div>

                <h3>4.3 Medicamentos Recetados</h3>

                <!-- Test Case HIST-006 -->
                <div class="test-case">
                    <span class="test-id">HIST-006</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Agregar medicamentos a consulta</h5>

                    <dl class="test-details">
                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Crear consulta</li>
                                    <li>En secci√≥n "Medicamentos", click "Agregar"</li>
                                    <li>Medicamento: "Amoxicilina"</li>
                                    <li>Dosis: "250 mg"</li>
                                    <li>Frecuencia: "Cada 12 horas"</li>
                                    <li>Duraci√≥n: "7 d√≠as"</li>
                                    <li>V√≠a: "Oral"</li>
                                    <li>Indicaciones: "Con alimento"</li>
                                    <li>Guardar</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Medicamento guardado en <code>medicamentos_recetados</code><br>
                                ‚úì Asociado a consulta actual (id_historia_clinica)<br>
                                ‚úì Visible en timeline con detalles<br>
                                ‚úì Receta m√©dica generada (PDF) con:
                                  - Logo de la cl√≠nica
                                  - Datos del doctor
                                  - Datos del paciente
                                  - Lista de medicamentos con dosis e indicaciones
                                  - Firma digital del veterinario<br>
                                ‚úì Si medicamento requiere control ‚Üí advertencia especial
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case HIST-007 -->
                <div class="test-case">
                    <span class="test-id">HIST-007</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">Seguridad</span>
                    <h5>Verificar interacciones medicamentosas</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>Al recetar medicamento, verificar si tiene interacciones con medicamentos activos</dd>

                        <dt>Precondiciones:</dt>
                        <dd>Paciente tiene medicamento activo: "Aspirina" (recetado hace 2 d√≠as, duraci√≥n 7 d√≠as)</dd>

                        <dt>Pasos:</dt>
                        <dd>Intentar recetar "Warfarina" (anticoagulante que interact√∫a con Aspirina)</dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Advertencia: "‚ö†Ô∏è Posible interacci√≥n medicamentosa"<br>
                                ‚úì Detalles: "Warfarina + Aspirina puede aumentar riesgo de hemorragia"<br>
                                ‚úì Opciones: "Recetar de todas formas" | "Cancelar"<br>
                                ‚úì Si confirma ‚Üí queda registrado en audit_logs que se recet√≥ con advertencia
                            </div>
                        </dd>
                    </dl>
                </div>

                <h3>4.4 Alergias</h3>

                <!-- Test Case HIST-008 -->
                <div class="test-case">
                    <span class="test-id">HIST-008</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Registrar alergia y validar contra medicamentos</h5>

                    <dl class="test-details">
                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Click "Agregar Alergia"</li>
                                    <li>Tipo: "Medicamento"</li>
                                    <li>Alergeno: "Penicilina"</li>
                                    <li>Severidad: "Alta"</li>
                                    <li>Reacci√≥n: "Anafilaxia"</li>
                                    <li>Guardar</li>
                                    <li>Intentar recetar "Amoxicilina" (derivado de penicilina)</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Alergia registrada en tabla <code>alergias</code> con estado "activa"<br>
                                ‚úì Banner rojo en historial: "‚ö†Ô∏è ALERGIAS: Penicilina (Alta)"<br>
                                ‚úì Al intentar recetar Amoxicilina:<br>
                                  - ‚ùå Error: "¬°ALERTA! Paciente al√©rgico a Penicilina"<br>
                                  - Muestra severidad y reacci√≥n conocida<br>
                                  - NO permite guardar (bloqueado por seguridad)<br>
                                ‚úì Sistema verifica contra derivados tambi√©n
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case HIST-009 -->
                <div class="test-case">
                    <span class="test-id">HIST-009</span>
                    <span class="priority priority-medium">MEDIA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Desactivar alergia</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>Si alergia fue error o ya no aplica, poder desactivarla (no eliminar)</dd>

                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Seleccionar alergia activa</li>
                                    <li>Click "Desactivar"</li>
                                    <li>Ingresar motivo: "Falsa alarma, no es al√©rgico"</li>
                                    <li>Confirmar</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Campo <code>activa</code> = 0<br>
                                ‚úì Motivo de desactivaci√≥n guardado<br>
                                ‚úì Ya no aparece en alertas<br>
                                ‚úì Sistema ya no bloquea medicamentos relacionados<br>
                                ‚úì Sigue visible en historial con estado "Inactiva"
                            </div>
                        </dd>
                    </dl>
                </div>

                <h3>4.5 Cirug√≠as y Procedimientos</h3>

                <!-- Test Case HIST-010 -->
                <div class="test-case">
                    <span class="test-id">HIST-010</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Registrar cirug√≠a completa</h5>

                    <dl class="test-details">
                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Click "Agregar Cirug√≠a/Procedimiento"</li>
                                    <li>Tipo: "Cirug√≠a"</li>
                                    <li>Nombre: "Esterilizaci√≥n (ovariohisterectom√≠a)"</li>
                                    <li>Fecha: Hoy</li>
                                    <li>Duraci√≥n: "45 minutos"</li>
                                    <li>Anestesia: "Isoflurano"</li>
                                    <li>Cirujano: Dr. autenticado</li>
                                    <li>Asistentes: "Dra. Mar√≠a L√≥pez"</li>
                                    <li>Hallazgos: "Sin complicaciones"</li>
                                    <li>Procedimiento: "Ovariohisterectom√≠a est√°ndar por l√≠nea media"</li>
                                    <li>Complicaciones: "Ninguna"</li>
                                    <li>Pron√≥stico: "Excelente"</li>
                                    <li>Cuidados post-op: "Reposo 7 d√≠as, antibi√≥tico"</li>
                                    <li>Guardar</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Cirug√≠a registrada en <code>cirugias_procedimientos</code><br>
                                ‚úì Visible en timeline con badge especial "Cirug√≠a"<br>
                                ‚úì Hoja quir√∫rgica generada (PDF) con todos los detalles<br>
                                ‚úì Recordatorio de retiro de puntos creado (+10 d√≠as)<br>
                                ‚úì Instrucciones post-operatorias impresas para propietario<br>
                                ‚úì Email al propietario con cuidados post-op
                            </div>
                        </dd>
                    </dl>
                </div>

                <h3>4.6 Ex√°menes de Laboratorio</h3>

                <!-- Test Case HIST-011 -->
                <div class="test-case">
                    <span class="test-id">HIST-011</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Solicitar examen de laboratorio</h5>

                    <dl class="test-details">
                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>En consulta, click "Solicitar Examen"</li>
                                    <li>Tipo: "Hemograma completo"</li>
                                    <li>Laboratorio: "Lab Veterinario Central"</li>
                                    <li>Indicaciones: "En ayunas"</li>
                                    <li>Estado: "Solicitado"</li>
                                    <li>Guardar</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Examen creado en <code>examenes_laboratorio</code><br>
                                ‚úì Estado: "solicitado"<br>
                                ‚úì Fecha de solicitud registrada<br>
                                ‚úì Orden de laboratorio imprimible (PDF)<br>
                                ‚úì Notificaci√≥n al propietario con indicaciones<br>
                                ‚úì Recordatorio para subir resultados
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case HIST-012 -->
                <div class="test-case">
                    <span class="test-id">HIST-012</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Cargar resultados de examen</h5>

                    <dl class="test-details">
                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Abrir examen "solicitado"</li>
                                    <li>Click "Cargar resultados"</li>
                                    <li>Adjuntar archivo PDF de resultados</li>
                                    <li>Completar valores:
                                        - Gl√≥bulos rojos: 6.5 M/ŒºL
                                        - Gl√≥bulos blancos: 8.2 K/ŒºL
                                        - Hemoglobina: 14.5 g/dL
                                        - etc.
                                    </li>
                                    <li>Notas: "Valores normales"</li>
                                    <li>Estado: "Completado"</li>
                                    <li>Guardar</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Estado cambiado a "completado"<br>
                                ‚úì Archivo PDF guardado en <code>adjuntos</code><br>
                                ‚úì Valores num√©ricos guardados en campos espec√≠ficos<br>
                                ‚úì Sistema compara con rangos normales:<br>
                                  - Verde: valores normales<br>
                                  - Amarillo: valores lim√≠trofes<br>
                                  - Rojo: valores anormales<br>
                                ‚úì Notificaci√≥n al doctor: "Resultados de examen disponibles"<br>
                                ‚úì Visible en timeline con link a PDF
                            </div>
                        </dd>
                    </dl>
                </div>

                <h3>4.7 Timeline y Visualizaci√≥n</h3>

                <!-- Test Case HIST-013 -->
                <div class="test-case">
                    <span class="test-id">HIST-013</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">UI/UX</span>
                    <h5>Timeline zoomable con paginaci√≥n</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>Timeline debe permitir zoom y paginaci√≥n para historiales extensos</dd>

                        <dt>Precondiciones:</dt>
                        <dd>Paciente con 50 eventos en historial (consultas, vacunas, etc.)</dd>

                        <dt>Comportamiento esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Por defecto muestra 10 eventos por p√°gina<br>
                                ‚úì Paginaci√≥n visible: "P√°gina 1 de 5"<br>
                                ‚úì Botones "Anterior" / "Siguiente" funcionales<br>
                                ‚úì En m√≥vil: selector dropdown de p√°gina<br>
                                ‚úì Zoom controls: "Zoom In" | "Zoom Out"<br>
                                ‚úì Al hacer zoom ‚Üí eventos se agrandan visualmente<br>
                                ‚úì Scroll suave entre p√°ginas<br>
                                ‚úì Carga lazy (solo carga p√°gina actual)
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case HIST-014 -->
                <div class="test-case">
                    <span class="test-id">HIST-014</span>
                    <span class="priority priority-medium">MEDIA</span>
                    <span class="test-type">UI/UX</span>
                    <h5>Gr√°ficas de evoluci√≥n</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>Visualizar evoluci√≥n de peso y temperatura en gr√°ficas</dd>

                        <dt>Precondiciones:</dt>
                        <dd>Paciente con 10 consultas registrando peso y temperatura</dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Gr√°fica de l√≠nea de peso a lo largo del tiempo<br>
                                ‚úì Gr√°fica de l√≠nea de temperatura<br>
                                ‚úì Eje X: fechas de consultas<br>
                                ‚úì Eje Y: valores (kg para peso, ¬∞C para temperatura)<br>
                                ‚úì Puntos interactivos: hover muestra valores exactos<br>
                                ‚úì L√≠nea de referencia con rango normal<br>
                                ‚úì Colores: verde (normal), amarillo (alerta), rojo (cr√≠tico)<br>
                                ‚úì Exportable como imagen PNG
                            </div>
                        </dd>
                    </dl>
                </div>

                <h3>4.8 Compartir Historial</h3>

                <!-- Test Case HIST-015 -->
                <div class="test-case">
                    <span class="test-id">HIST-015</span>
                    <span class="priority priority-medium">MEDIA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Generar link p√∫blico de historial</h5>

                    <dl class="test-details">
                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>En historial, click "Compartir"</li>
                                    <li>Seleccionar qu√© compartir:
                                        - ‚úÖ Consultas
                                        - ‚úÖ Vacunas
                                        - ‚ùå Alergias (no compartir)
                                        - ‚úÖ Cirug√≠as
                                    </li>
                                    <li>Validez: 30 d√≠as</li>
                                    <li>Generar link</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Token √∫nico generado: /historial-compartido/:token<br>
                                ‚úì Link copiado al portapapeles<br>
                                ‚úì Email enviado al propietario con link<br>
                                ‚úì Al abrir link (sin autenticaci√≥n):
                                  - Muestra historial seleccionado
                                  - Vista de solo lectura
                                  - Sin datos sensibles (costos, notas privadas)
                                  - Marca de agua: "Compartido por Dr. [Nombre]"<br>
                                ‚úì Despu√©s de 30 d√≠as ‚Üí link expira
                            </div>
                        </dd>
                    </dl>
                </div>

                <h3>4.9 Exportaci√≥n</h3>

                <!-- Test Case HIST-016 -->
                <div class="test-case">
                    <span class="test-id">HIST-016</span>
                    <span class="priority priority-medium">MEDIA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Exportar historial a PDF</h5>

                    <dl class="test-details">
                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Click "Exportar a PDF"</li>
                                    <li>Esperar generaci√≥n</li>
                                    <li>PDF se descarga autom√°ticamente</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Contenido del PDF esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Portada con:
                                  - Logo de la cl√≠nica
                                  - Nombre del paciente
                                  - Foto del paciente
                                  - Datos del propietario<br>
                                ‚úì √çndice de contenidos<br>
                                ‚úì Resumen de datos del paciente<br>
                                ‚úì Todas las consultas con signos vitales<br>
                                ‚úì Listado de vacunas con pr√≥ximas dosis<br>
                                ‚úì Alergias activas destacadas<br>
                                ‚úì Cirug√≠as y procedimientos<br>
                                ‚úì Gr√°ficas de evoluci√≥n (peso, temperatura)<br>
                                ‚úì Pie de p√°gina con firma digital del doctor<br>
                                ‚úì C√≥digo QR con link al historial compartido
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case HIST-017 -->
                <div class="test-case">
                    <span class="test-id">HIST-017</span>
                    <span class="priority priority-medium">MEDIA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Exportar historial a Excel</h5>

                    <dl class="test-details">
                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Archivo .xlsx con m√∫ltiples hojas:
                                  - Hoja "Datos Paciente"
                                  - Hoja "Consultas"
                                  - Hoja "Vacunas"
                                  - Hoja "Medicamentos"
                                  - Hoja "Cirug√≠as"
                                  - Hoja "Ex√°menes"<br>
                                ‚úì Formateado con colores y estilos<br>
                                ‚úì Columnas con anchos apropiados<br>
                                ‚úì Filtros habilitados en encabezados<br>
                                ‚úì Fechas en formato correcto
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Resumen -->
                <div class="alert alert-success">
                    <h4>‚úÖ Resumen de Pruebas de Historial Cl√≠nico</h4>
                    <ul class="checklist">
                        <li>Consultas m√©dicas con signos vitales completos</li>
                        <li>Validaci√≥n de rangos normales</li>
                        <li>Edici√≥n con auditor√≠a completa</li>
                        <li>Registro de vacunas con recordatorios autom√°ticos</li>
                        <li>Medicamentos con verificaci√≥n de interacciones</li>
                        <li>Sistema de alergias con bloqueo autom√°tico</li>
                        <li>Cirug√≠as con hojas quir√∫rgicas</li>
                        <li>Ex√°menes de laboratorio con adjuntos</li>
                        <li>Timeline zoomable y paginado</li>
                        <li>Gr√°ficas de evoluci√≥n</li>
                        <li>Compartir historial con links temporales</li>
                        <li>Exportaci√≥n a PDF y Excel</li>
                    </ul>
                    <p><strong>Total casos detallados: 17 | Casos adicionales a crear: 58</strong></p>
                </div>
            </section>

            <!-- M√ìDULO 5: EST√âTICA Y GROOMING -->
            <section id="estetica" class="section">
                <div class="module-header">
                    <h2>‚úÇÔ∏è M√≥dulo 5: Est√©tica y Grooming</h2>
                </div>

                <div class="alert alert-warning">
                    <strong>‚ö†Ô∏è PRIORIDAD ALTA:</strong> M√≥dulo importante para ingresos adicionales. Debe integrarse bien con citas y perfiles de pacientes.
                </div>

                <h3>5.1 Citas de Est√©tica</h3>

                <!-- Test Case EST-001 -->
                <div class="test-case">
                    <span class="test-id">EST-001</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Crear cita de est√©tica con selector de hora tipo grilla</h5>

                    <dl class="test-details">
                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Navegar a /estetica</li>
                                    <li>Click "Nueva Cita de Est√©tica"</li>
                                    <li>Seleccionar paciente: "Max"</li>
                                    <li>Fecha: Ma√±ana</li>
                                    <li>Tipo de servicio: "Ba√±o + Corte"</li>
                                    <li>Selector de hora (grilla de botones): Click en "10:00 AM"</li>
                                    <li>Duraci√≥n estimada: Auto-calculada (90 min)</li>
                                    <li>Notas: "Corte estilo verano"</li>
                                    <li>Guardar</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Cita creada en <code>citas_estetica</code><br>
                                ‚úì Estado: "programada"<br>
                                ‚úì Duraci√≥n auto-calculada seg√∫n tipo servicio<br>
                                ‚úì Email de confirmaci√≥n al propietario<br>
                                ‚úì Visible en calendario de est√©tica<br>
                                ‚úì Recordatorio creado (24h antes)<br>
                                ‚úì Toast: "Cita de est√©tica agendada"
                            </div>
                        </dd>

                        <dt>Validar selector de hora:</dt>
                        <dd>
                            ‚úì Horas disponibles mostradas como botones en grilla<br>
                            ‚úì Horas ocupadas deshabilitadas (gris)<br>
                            ‚úì Hora seleccionada resaltada (azul)<br>
                            ‚úì Intervalos de 30 minutos
                        </dd>
                    </dl>
                </div>

                <!-- Test Case EST-002 -->
                <div class="test-case">
                    <span class="test-id">EST-002</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">Unitaria</span>
                    <h5>Validar tipos de servicio</h5>

                    <dl class="test-details">
                        <dt>Tipos disponibles (sincronizados frontend-backend):</dt>
                        <dd>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Tipo</th>
                                        <th>Duraci√≥n Estimada</th>
                                        <th>Aplica para</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>ba√±o</td>
                                        <td>60 min</td>
                                        <td>Todos</td>
                                    </tr>
                                    <tr>
                                        <td>corte</td>
                                        <td>45 min</td>
                                        <td>Perros, Gatos</td>
                                    </tr>
                                    <tr>
                                        <td>ba√±o_corte</td>
                                        <td>90 min</td>
                                        <td>Todos</td>
                                    </tr>
                                    <tr>
                                        <td>u√±as</td>
                                        <td>15 min</td>
                                        <td>Todos</td>
                                    </tr>
                                    <tr>
                                        <td>limpieza_dental</td>
                                        <td>30 min</td>
                                        <td>Perros, Gatos</td>
                                    </tr>
                                    <tr>
                                        <td>spa_premium</td>
                                        <td>120 min</td>
                                        <td>Todos</td>
                                    </tr>
                                    <tr>
                                        <td>deslanado</td>
                                        <td>90 min</td>
                                        <td>Perros</td>
                                    </tr>
                                    <tr>
                                        <td>tratamiento_pulgas</td>
                                        <td>30 min</td>
                                        <td>Todos</td>
                                    </tr>
                                </tbody>
                            </table>
                        </dd>

                        <dt>Validaci√≥n:</dt>
                        <dd>
                            ‚úì Dropdown muestra solo servicios aplicables a especie del paciente<br>
                            ‚úì Duraci√≥n se calcula autom√°ticamente<br>
                            ‚úì Precio var√≠a seg√∫n tama√±o del paciente
                        </dd>
                    </dl>
                </div>

                <h3>5.2 Perfiles de Est√©tica</h3>

                <!-- Test Case EST-003 -->
                <div class="test-case">
                    <span class="test-id">EST-003</span>
                    <span class="priority priority-medium">MEDIA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Crear perfil de est√©tica para paciente</h5>

                    <dl class="test-details">
                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Abrir historial de est√©tica del paciente</li>
                                    <li>Click "Crear Perfil de Est√©tica"</li>
                                    <li>Estilo preferido: "Corte tipo cachorro"</li>
                                    <li>Largo preferido: "Medio"</li>
                                    <li>Productos favoritos: "Shampoo hipoalerg√©nico marca X"</li>
                                    <li>Productos a evitar: "Fragancias fuertes"</li>
                                    <li>Sensibilidades: "Orejas sensibles"</li>
                                    <li>Frecuencia recomendada: "Cada 6 semanas"</li>
                                    <li>Notas de comportamiento: "Nervioso con secadora"</li>
                                    <li>Guardar</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Perfil creado en <code>perfiles_estetica</code><br>
                                ‚úì Al crear pr√≥xima cita ‚Üí preferencias se auto-cargan<br>
                                ‚úì Visible en modal de cita de est√©tica<br>
                                ‚úì Recordatorio autom√°tico seg√∫n frecuencia (6 semanas)<br>
                                ‚úì Toast: "Perfil de est√©tica creado"
                            </div>
                        </dd>
                    </dl>
                </div>

                <h3>5.3 Galer√≠a de Fotos</h3>

                <!-- Test Case EST-004 -->
                <div class="test-case">
                    <span class="test-id">EST-004</span>
                    <span class="priority priority-medium">MEDIA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Subir fotos before/after</h5>

                    <dl class="test-details">
                        <dt>Pasos:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Durante cita en_proceso</li>
                                    <li>Click "Agregar Foto"</li>
                                    <li>Tipo: "Antes"</li>
                                    <li>Seleccionar imagen (max 5MB, JPG/PNG)</li>
                                    <li>Subir</li>
                                    <li>Al completar servicio, agregar foto "Despu√©s"</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Im√°genes guardadas en <code>galeria_estetica</code><br>
                                ‚úì Comprimidas autom√°ticamente (optimizaci√≥n)<br>
                                ‚úì Visible en historial de est√©tica<br>
                                ‚úì Galer√≠a before/after lado a lado<br>
                                ‚úì Email al propietario con fotos adjuntas<br>
                                ‚úì Timestamp de captura registrado
                            </div>
                        </dd>
                    </dl>
                </div>

                <h3>5.4 Estados de Citas de Est√©tica</h3>

                <!-- Test Case EST-005 -->
                <div class="test-case">
                    <span class="test-id">EST-005</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Flujo de estados de cita de est√©tica</h5>

                    <dl class="test-details">
                        <dt>Estados:</dt>
                        <dd>programada ‚Üí confirmada ‚Üí en_proceso ‚Üí completada</dd>

                        <dt>Colores:</dt>
                        <dd>
                            - programada: gris (#9CA3AF)<br>
                            - confirmada: azul (#3B82F6)<br>
                            - en_proceso: amarillo (#F59E0B)<br>
                            - completada: verde (#10B981)<br>
                            - cancelada: rojo (#EF4444)<br>
                            - no_asistio: naranja (#F97316)
                        </dd>

                        <dt>Validaciones:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Solo "programada" puede pasar a "confirmada"<br>
                                ‚úì Solo "confirmada" puede pasar a "en_proceso"<br>
                                ‚úì Solo "en_proceso" puede pasar a "completada"<br>
                                ‚úì Cualquier estado puede cancelarse (excepto completada)<br>
                                ‚úì Timestamps de cada cambio registrados
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Resumen -->
                <div class="alert alert-success">
                    <h4>‚úÖ Resumen de Pruebas de Est√©tica</h4>
                    <ul class="checklist">
                        <li>9 tipos de servicios correctamente implementados</li>
                        <li>Selector de hora tipo grilla</li>
                        <li>Perfiles de est√©tica con preferencias</li>
                        <li>Galer√≠a de fotos before/after</li>
                        <li>Flujo completo de estados</li>
                        <li>Duraci√≥n estimada auto-calculada</li>
                        <li>Recordatorios autom√°ticos</li>
                        <li>Sincronizaci√≥n frontend-backend de tipos</li>
                    </ul>
                    <p><strong>Total casos detallados: 5 | Casos adicionales a crear: 39</strong></p>
                </div>
            </section>

            <!-- M√ìDULO 6: DASHBOARD -->
            <section id="dashboard" class="section">
                <div class="module-header">
                    <h2>üìä M√≥dulo 6: Dashboard y Acciones R√°pidas</h2>
                </div>

                <h3>6.1 Estad√≠sticas en Tiempo Real</h3>

                <!-- Test Case DASH-001 -->
                <div class="test-case">
                    <span class="test-id">DASH-001</span>
                    <span class="priority priority-medium">MEDIA</span>
                    <span class="test-type">Integraci√≥n</span>
                    <h5>Verificar c√°lculo de estad√≠sticas del dashboard</h5>

                    <dl class="test-details">
                        <dt>Estad√≠sticas a validar:</dt>
                        <dd>
                            <table>
                                <thead>
                                    <tr>
                                        <th>M√©trica</th>
                                        <th>C√°lculo</th>
                                        <th>Fuente</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Total Pacientes</td>
                                        <td>COUNT(*) WHERE estado = 'activo'</td>
                                        <td>pacientes</td>
                                    </tr>
                                    <tr>
                                        <td>Citas del D√≠a</td>
                                        <td>COUNT(*) WHERE fecha = TODAY</td>
                                        <td>citas</td>
                                    </tr>
                                    <tr>
                                        <td>Ingresos Mensuales</td>
                                        <td>SUM(monto) WHERE mes_actual</td>
                                        <td>ingresos</td>
                                    </tr>
                                    <tr>
                                        <td>Citas Completadas</td>
                                        <td>COUNT(*) WHERE estado = 'completada' AND mes_actual</td>
                                        <td>citas</td>
                                    </tr>
                                </tbody>
                            </table>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì N√∫meros correctos seg√∫n BD<br>
                                ‚úì Formato con separadores de miles (1,234)<br>
                                ‚úì Iconos apropiados para cada m√©trica<br>
                                ‚úì Animaci√≥n de conteo al cargar<br>
                                ‚úì Se actualizan al realizar acciones (crear paciente, etc.)
                            </div>
                        </dd>
                    </dl>
                </div>

                <h3>6.2 Acciones R√°pidas</h3>

                <!-- Test Case DASH-002 -->
                <div class="test-case">
                    <span class="test-id">DASH-002</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">E2E</span>
                    <h5>Acciones r√°pidas funcionales</h5>

                    <dl class="test-details">
                        <dt>Botones a probar:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li><strong>Nuevo Paciente:</strong> Abre modal AddPatientModal</li>
                                    <li><strong>Nueva Cita:</strong> Abre modal AddAppointmentModal</li>
                                    <li><strong>Historia Cl√≠nica:</strong> Abre PatientSpotlight (Cmd+K)</li>
                                    <li><strong>Urgencia:</strong> Abre modal de cita con tipo "urgencia" pre-seleccionado</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Validaciones:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Cada bot√≥n abre el modal correcto<br>
                                ‚úì Sidebar se colapsa al abrir modal (UX)<br>
                                ‚úì Al cerrar modal ‚Üí sidebar se restaura<br>
                                ‚úì Spotlight no afecta sidebar<br>
                                ‚úì Animaciones suaves (150ms)
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Resumen -->
                <div class="alert alert-success">
                    <h4>‚úÖ Resumen de Pruebas de Dashboard</h4>
                    <ul class="checklist">
                        <li>Estad√≠sticas calculadas correctamente</li>
                        <li>Acciones r√°pidas totalmente funcionales</li>
                        <li>Patient Spotlight con Cmd+K</li>
                        <li>Pacientes recientes</li>
                        <li>Pr√≥ximas citas</li>
                        <li>UI responsive y animada</li>
                    </ul>
                    <p><strong>Total casos detallados: 2 | Casos adicionales a crear: 34</strong></p>
                </div>
            </section>

            <!-- M√ìDULO 7: SEGURIDAD -->
            <section id="seguridad" class="section">
                <div class="module-header">
                    <h2>üîí M√≥dulo 7: Seguridad y Autorizaciones</h2>
                </div>

                <div class="alert alert-danger">
                    <strong>‚ö†Ô∏è PRIORIDAD CR√çTICA:</strong> La seguridad es fundamental. Debe cumplir con regulaciones de protecci√≥n de datos m√©dicos.
                </div>

                <h3>7.1 Pruebas de Seguridad</h3>

                <!-- Test Case SEC-001 -->
                <div class="test-case">
                    <span class="test-id">SEC-001</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Seguridad</span>
                    <h5>Prevenir SQL Injection</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>Verificar que todas las consultas usan prepared statements</dd>

                        <dt>Casos maliciosos a probar:</dt>
                        <dd>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Campo</th>
                                        <th>Input Malicioso</th>
                                        <th>Resultado Esperado</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Email (login)</td>
                                        <td>' OR '1'='1</td>
                                        <td>‚úÖ Login falla, no bypasea autenticaci√≥n</td>
                                    </tr>
                                    <tr>
                                        <td>B√∫squeda paciente</td>
                                        <td>'; DROP TABLE pacientes; --</td>
                                        <td>‚úÖ Busca literalmente ese string, no ejecuta SQL</td>
                                    </tr>
                                    <tr>
                                        <td>Nombre paciente</td>
                                        <td>admin'--</td>
                                        <td>‚úÖ Guarda como string literal</td>
                                    </tr>
                                </tbody>
                            </table>
                        </dd>

                        <dt>Validaci√≥n en c√≥digo:</dt>
                        <dd>
                            <div class="code-block">
// ‚úÖ CORRECTO - Usar prepared statements
const query = 'SELECT * FROM pacientes WHERE nombre = ?';
db.query(query, [nombrePaciente]);

// ‚ùå INCORRECTO - Concatenaci√≥n directa
const query = `SELECT * FROM pacientes WHERE nombre = '${nombrePaciente}'`;
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case SEC-002 -->
                <div class="test-case">
                    <span class="test-id">SEC-002</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Seguridad</span>
                    <h5>Verificar encriptaci√≥n de passwords</h5>

                    <dl class="test-details">
                        <dt>Validaciones:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Passwords NUNCA guardados en texto plano<br>
                                ‚úì Usar bcrypt con salt rounds ‚â• 10<br>
                                ‚úì Hash diferente para mismo password (gracias al salt)<br>
                                ‚úì No enviar password en respuestas API<br>
                                ‚úì No loguear passwords (ni siquiera en dev)
                            </div>
                        </dd>

                        <dt>Prueba en BD:</dt>
                        <dd>
                            <div class="code-block">
SELECT password FROM usuarios WHERE email = 'test@test.com';
-- Debe retornar hash tipo: $2b$10$abcdefghijklmnopqrstuvwxyz...
-- NO debe retornar: "Test123!"
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case SEC-003 -->
                <div class="test-case">
                    <span class="test-id">SEC-003</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Seguridad</span>
                    <h5>Validar tokens JWT</h5>

                    <dl class="test-details">
                        <dt>Casos a probar:</dt>
                        <dd>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Escenario</th>
                                        <th>Resultado Esperado</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>JWT v√°lido</td>
                                        <td>‚úÖ Acceso permitido</td>
                                    </tr>
                                    <tr>
                                        <td>JWT expirado</td>
                                        <td>‚ùå 401 Unauthorized "Token expirado"</td>
                                    </tr>
                                    <tr>
                                        <td>JWT malformado</td>
                                        <td>‚ùå 401 Unauthorized "Token inv√°lido"</td>
                                    </tr>
                                    <tr>
                                        <td>JWT con firma incorrecta</td>
                                        <td>‚ùå 401 Unauthorized "Token inv√°lido"</td>
                                    </tr>
                                    <tr>
                                        <td>Sin JWT (header vac√≠o)</td>
                                        <td>‚ùå 401 Unauthorized "No autorizado"</td>
                                    </tr>
                                </tbody>
                            </table>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case SEC-004 -->
                <div class="test-case">
                    <span class="test-id">SEC-004</span>
                    <span class="priority priority-high">ALTA</span>
                    <span class="test-type">Seguridad</span>
                    <h5>Prevenir XSS (Cross-Site Scripting)</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>Verificar que inputs maliciosos no ejecutan scripts</dd>

                        <dt>Casos:</dt>
                        <dd>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Campo</th>
                                        <th>Input Malicioso</th>
                                        <th>Resultado Esperado</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Nombre paciente</td>
                                        <td>&lt;script&gt;alert('XSS')&lt;/script&gt;</td>
                                        <td>‚úÖ Escapado como texto, no ejecuta</td>
                                    </tr>
                                    <tr>
                                        <td>Motivo consulta</td>
                                        <td>&lt;img src=x onerror=alert(1)&gt;</td>
                                        <td>‚úÖ Sanitizado, no ejecuta</td>
                                    </tr>
                                    <tr>
                                        <td>Notas</td>
                                        <td>&lt;iframe src="evil.com"&gt;</td>
                                        <td>‚úÖ Removido o escapado</td>
                                    </tr>
                                </tbody>
                            </table>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case SEC-005 -->
                <div class="test-case">
                    <span class="test-id">SEC-005</span>
                    <span class="priority priority-critical">CR√çTICA</span>
                    <span class="test-type">Seguridad</span>
                    <h5>Control de acceso basado en roles</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>Verificar que solo usuarios autorizados acceden a ciertos recursos</dd>

                        <dt>Matriz de permisos:</dt>
                        <dd>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Acci√≥n</th>
                                        <th>Admin</th>
                                        <th>Doctor</th>
                                        <th>Recepci√≥n</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Ver pacientes</td>
                                        <td>‚úÖ</td>
                                        <td>‚úÖ (solo suyos)</td>
                                        <td>‚úÖ</td>
                                    </tr>
                                    <tr>
                                        <td>Crear consulta m√©dica</td>
                                        <td>‚úÖ</td>
                                        <td>‚úÖ</td>
                                        <td>‚ùå</td>
                                    </tr>
                                    <tr>
                                        <td>Editar historial cl√≠nico</td>
                                        <td>‚úÖ</td>
                                        <td>‚úÖ (solo el que cre√≥)</td>
                                        <td>‚ùå</td>
                                    </tr>
                                    <tr>
                                        <td>Ver reportes financieros</td>
                                        <td>‚úÖ</td>
                                        <td>‚ùå</td>
                                        <td>‚ùå</td>
                                    </tr>
                                </tbody>
                            </table>
                        </dd>

                        <dt>Pruebas:</dt>
                        <dd>
                            ‚úì Login como doctor ‚Üí NO puede editar consulta de otro doctor<br>
                            ‚úì Login como recepci√≥n ‚Üí NO puede crear consultas<br>
                            ‚úì Intentar API directa sin rol ‚Üí 403 Forbidden
                        </dd>
                    </dl>
                </div>

                <!-- Resumen -->
                <div class="alert alert-success">
                    <h4>‚úÖ Resumen de Pruebas de Seguridad</h4>
                    <ul class="checklist">
                        <li>SQL Injection - Prepared statements</li>
                        <li>XSS - Sanitizaci√≥n de inputs</li>
                        <li>Passwords encriptados con bcrypt</li>
                        <li>JWT validado correctamente</li>
                        <li>Control de acceso basado en roles</li>
                        <li>CORS configurado correctamente</li>
                        <li>Rate limiting para prevenir ataques</li>
                        <li>Audit logs de acciones sensibles</li>
                    </ul>
                    <p><strong>Total casos detallados: 5 | Casos adicionales a crear: 40</strong></p>
                </div>
            </section>

            <!-- M√ìDULO 8: PERFORMANCE Y UI/UX -->
            <section id="performance" class="section">
                <div class="module-header">
                    <h2>‚ö° M√≥dulo 8: Performance y UI/UX</h2>
                </div>

                <h3>8.1 Performance</h3>

                <!-- Test Case PERF-001 -->
                <div class="test-case">
                    <span class="test-id">PERF-001</span>
                    <span class="priority priority-medium">MEDIA</span>
                    <span class="test-type">Performance</span>
                    <h5>Tiempo de carga del dashboard</h5>

                    <dl class="test-details">
                        <dt>M√©trica:</dt>
                        <dd>Dashboard debe cargar en menos de 2 segundos</dd>

                        <dt>Validaciones:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì First Contentful Paint (FCP) < 1.5s<br>
                                ‚úì Time to Interactive (TTI) < 2.0s<br>
                                ‚úì Largest Contentful Paint (LCP) < 2.5s<br>
                                ‚úì Cumulative Layout Shift (CLS) < 0.1
                            </div>
                        </dd>

                        <dt>Herramientas:</dt>
                        <dd>
                            - Chrome DevTools ‚Üí Performance tab<br>
                            - Lighthouse audit<br>
                            - Network tab para verificar requests
                        </dd>
                    </dl>
                </div>

                <!-- Test Case PERF-002 -->
                <div class="test-case">
                    <span class="test-id">PERF-002</span>
                    <span class="priority priority-medium">MEDIA</span>
                    <span class="test-type">Performance</span>
                    <h5>B√∫squeda con debounce</h5>

                    <dl class="test-details">
                        <dt>Descripci√≥n:</dt>
                        <dd>B√∫squeda de pacientes debe usar debounce para evitar m√∫ltiples requests</dd>

                        <dt>Prueba:</dt>
                        <dd>
                            <div class="test-steps">
                                <ol>
                                    <li>Abrir buscador de pacientes</li>
                                    <li>Escribir r√°pidamente "Maximus"</li>
                                    <li>Observar Network tab</li>
                                </ol>
                            </div>
                        </dd>

                        <dt>Resultado Esperado:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Solo 1 request al servidor (despu√©s de 300ms de pausa)<br>
                                ‚úì NO 7 requests (uno por cada letra)<br>
                                ‚úì Loading indicator mientras espera<br>
                                ‚úì Request cancelado si usuario sigue escribiendo
                            </div>
                        </dd>
                    </dl>
                </div>

                <h3>8.2 UI/UX</h3>

                <!-- Test Case UI-001 -->
                <div class="test-case">
                    <span class="test-id">UI-001</span>
                    <span class="priority priority-medium">MEDIA</span>
                    <span class="test-type">UI/UX</span>
                    <h5>Responsividad en dispositivos m√≥viles</h5>

                    <dl class="test-details">
                        <dt>Viewports a probar:</dt>
                        <dd>
                            - iPhone SE (375x667)<br>
                            - iPhone 12 Pro (390x844)<br>
                            - iPad (768x1024)<br>
                            - Desktop (1920x1080)
                        </dd>

                        <dt>Validaciones:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Sidebar se convierte en men√∫ hamburguesa en m√≥vil<br>
                                ‚úì Tablas scrolleables horizontalmente en m√≥vil<br>
                                ‚úì Modales ocupan 100% del viewport en m√≥vil<br>
                                ‚úì Botones suficientemente grandes (m√≠nimo 44x44px)<br>
                                ‚úì Texto legible sin zoom (m√≠nimo 16px)<br>
                                ‚úì Calendario adaptado a m√≥vil
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Test Case UI-002 -->
                <div class="test-case">
                    <span class="test-id">UI-002</span>
                    <span class="priority priority-low">BAJA</span>
                    <span class="test-type">UI/UX</span>
                    <h5>Dark mode funcional</h5>

                    <dl class="test-details">
                        <dt>Validaciones:</dt>
                        <dd>
                            <div class="expected-result">
                                ‚úì Toggle en header funciona correctamente<br>
                                ‚úì Preferencia guardada en localStorage<br>
                                ‚úì Se mantiene al recargar p√°gina<br>
                                ‚úì Todos los componentes soportan dark mode<br>
                                ‚úì Wallpapers cambian seg√∫n tema<br>
                                ‚úì Contraste suficiente en ambos modos (WCAG AA)
                            </div>
                        </dd>
                    </dl>
                </div>

                <!-- Resumen -->
                <div class="alert alert-success">
                    <h4>‚úÖ Resumen de Pruebas de Performance y UI/UX</h4>
                    <ul class="checklist">
                        <li>Tiempos de carga optimizados</li>
                        <li>Debouncing en b√∫squedas</li>
                        <li>Responsividad completa</li>
                        <li>Dark mode funcional</li>
                        <li>Animaciones suaves (150ms)</li>
                        <li>Loading states en todas las operaciones</li>
                        <li>Toast notifications consistentes</li>
                        <li>Accesibilidad b√°sica (WCAG AA)</li>
                    </ul>
                    <p><strong>Total casos detallados: 4 | Casos adicionales a crear: 6</strong></p>
                </div>
            </section>

            <!-- SECCI√ìN FINAL: MATRIZ DE TRAZABILIDAD -->
            <section id="ui" class="section">
                <div class="module-header">
                    <h2>üìã Matriz de Trazabilidad y Plan de Ejecuci√≥n</h2>
                </div>

                <h3>Resumen Final de Casos de Prueba</h3>

                <table>
                    <thead>
                        <tr>
                            <th>M√≥dulo</th>
                            <th>Casos Documentados</th>
                            <th>Casos Adicionales</th>
                            <th>Total</th>
                            <th>Prioridad</th>
                            <th>Estado</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1. Autenticaci√≥n</td>
                            <td>21</td>
                            <td>31</td>
                            <td><strong>52</strong></td>
                            <td><span class="badge badge-danger">Cr√≠tica</span></td>
                            <td><span class="badge badge-warning">Pendiente</span></td>
                        </tr>
                        <tr>
                            <td>2. Pacientes</td>
                            <td>14</td>
                            <td>51</td>
                            <td><strong>65</strong></td>
                            <td><span class="badge badge-danger">Cr√≠tica</span></td>
                            <td><span class="badge badge-warning">Pendiente</span></td>
                        </tr>
                        <tr>
                            <td>3. Citas M√©dicas</td>
                            <td>15</td>
                            <td>47</td>
                            <td><strong>62</strong></td>
                            <td><span class="badge badge-danger">Cr√≠tica</span></td>
                            <td><span class="badge badge-warning">Pendiente</span></td>
                        </tr>
                        <tr>
                            <td>4. Historial Cl√≠nico</td>
                            <td>17</td>
                            <td>58</td>
                            <td><strong>75</strong></td>
                            <td><span class="badge badge-danger">Cr√≠tica</span></td>
                            <td><span class="badge badge-warning">Pendiente</span></td>
                        </tr>
                        <tr>
                            <td>5. Est√©tica y Grooming</td>
                            <td>5</td>
                            <td>39</td>
                            <td><strong>44</strong></td>
                            <td><span class="badge badge-warning">Alta</span></td>
                            <td><span class="badge badge-warning">Pendiente</span></td>
                        </tr>
                        <tr>
                            <td>6. Dashboard</td>
                            <td>2</td>
                            <td>34</td>
                            <td><strong>36</strong></td>
                            <td><span class="badge badge-info">Media</span></td>
                            <td><span class="badge badge-warning">Pendiente</span></td>
                        </tr>
                        <tr>
                            <td>7. Seguridad</td>
                            <td>5</td>
                            <td>40</td>
                            <td><strong>45</strong></td>
                            <td><span class="badge badge-danger">Cr√≠tica</span></td>
                            <td><span class="badge badge-warning">Pendiente</span></td>
                        </tr>
                        <tr>
                            <td>8. Performance/UI</td>
                            <td>4</td>
                            <td>6</td>
                            <td><strong>10</strong></td>
                            <td><span class="badge badge-info">Media</span></td>
                            <td><span class="badge badge-warning">Pendiente</span></td>
                        </tr>
                        <tr style="background: #f0f0f0; font-weight: bold; font-size: 1.1em;">
                            <td>TOTAL</td>
                            <td>83</td>
                            <td>306</td>
                            <td><strong>389</strong></td>
                            <td>-</td>
                            <td>-</td>
                        </tr>
                    </tbody>
                </table>

                <div class="alert alert-info" style="margin-top: 40px;">
                    <h3>üìÖ Plan de Ejecuci√≥n Recomendado</h3>
                    <h4>Fase 1: Pruebas Cr√≠ticas (Semana 1-2)</h4>
                    <ul>
                        <li>‚úÖ M√≥dulo 1: Autenticaci√≥n (52 casos)</li>
                        <li>‚úÖ M√≥dulo 2: Pacientes (65 casos)</li>
                        <li>‚úÖ M√≥dulo 7: Seguridad (45 casos)</li>
                        <li><strong>Total Fase 1: 162 casos</strong></li>
                    </ul>

                    <h4>Fase 2: Pruebas de Funcionalidad Core (Semana 3-4)</h4>
                    <ul>
                        <li>‚úÖ M√≥dulo 3: Citas M√©dicas (62 casos)</li>
                        <li>‚úÖ M√≥dulo 4: Historial Cl√≠nico (75 casos)</li>
                        <li><strong>Total Fase 2: 137 casos</strong></li>
                    </ul>

                    <h4>Fase 3: Pruebas de M√≥dulos Adicionales (Semana 5)</h4>
                    <ul>
                        <li>‚úÖ M√≥dulo 5: Est√©tica y Grooming (44 casos)</li>
                        <li>‚úÖ M√≥dulo 6: Dashboard (36 casos)</li>
                        <li><strong>Total Fase 3: 80 casos</strong></li>
                    </ul>

                    <h4>Fase 4: Optimizaci√≥n y UX (Semana 6)</h4>
                    <ul>
                        <li>‚úÖ M√≥dulo 8: Performance/UI (10 casos)</li>
                        <li>‚úÖ Pruebas end-to-end de flujos completos</li>
                        <li>‚úÖ Correcci√≥n de bugs encontrados</li>
                        <li><strong>Total Fase 4: 10 casos</strong></li>
                    </ul>
                </div>

                <div class="alert alert-success" style="margin-top: 40px;">
                    <h3>‚úÖ Criterios de Aceptaci√≥n para Producci√≥n</h3>
                    <ul class="checklist">
                        <li>100% de pruebas cr√≠ticas (162 casos) pasadas exitosamente</li>
                        <li>‚â•95% de pruebas de funcionalidad core (137 casos) pasadas</li>
                        <li>‚â•85% de pruebas de m√≥dulos adicionales (80 casos) pasadas</li>
                        <li>‚â•70% de pruebas de performance/UI (10 casos) pasadas</li>
                        <li>0 bugs de severidad cr√≠tica abiertos</li>
                        <li>‚â§3 bugs de severidad alta abiertos</li>
                        <li>Documentaci√≥n de API actualizada</li>
                        <li>Manual de usuario b√°sico creado</li>
                        <li>Backup y restore de BD probado</li>
                        <li>Plan de soporte post-lanzamiento definido</li>
                    </ul>
                </div>

                <div class="alert alert-warning" style="margin-top: 40px;">
                    <h3>‚ö†Ô∏è Casos de Prueba Fuera del Alcance Actual</h3>
                    <p>Los siguientes m√≥dulos fueron identificados en el an√°lisis pero no est√°n implementados a√∫n:</p>
                    <ul>
                        <li><strong>Inventario:</strong> Gesti√≥n de productos y stock</li>
                        <li><strong>Facturaci√≥n:</strong> Generaci√≥n de facturas electr√≥nicas</li>
                        <li><strong>Reportes Avanzados:</strong> Dashboards anal√≠ticos</li>
                        <li><strong>Sistema de Roles Granular:</strong> Permisos por funcionalidad</li>
                        <li><strong>Chat Interno:</strong> Comunicaci√≥n entre equipo</li>
                        <li><strong>Telemedicina:</strong> Consultas virtuales</li>
                    </ul>
                    <p><em>Estos m√≥dulos requerir√°n planes de prueba adicionales cuando se implementen.</em></p>
                </div>

                <div class="alert alert-info" style="margin-top: 40px;">
                    <h3>üìö Herramientas Recomendadas para Testing</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Tipo de Prueba</th>
                                <th>Herramienta</th>
                                <th>Prop√≥sito</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Unitarias Backend</td>
                                <td>Jest + Supertest</td>
                                <td>Testing de endpoints API</td>
                            </tr>
                            <tr>
                                <td>Unitarias Frontend</td>
                                <td>Vitest + React Testing Library</td>
                                <td>Testing de componentes</td>
                            </tr>
                            <tr>
                                <td>Integraci√≥n</td>
                                <td>Postman / Newman</td>
                                <td>Testing de flujos completos API</td>
                            </tr>
                            <tr>
                                <td>E2E</td>
                                <td>Playwright / Cypress</td>
                                <td>Testing de flujos de usuario completos</td>
                            </tr>
                            <tr>
                                <td>Performance</td>
                                <td>Lighthouse / WebPageTest</td>
                                <td>An√°lisis de performance</td>
                            </tr>
                            <tr>
                                <td>Seguridad</td>
                                <td>OWASP ZAP / Snyk</td>
                                <td>An√°lisis de vulnerabilidades</td>
                            </tr>
                            <tr>
                                <td>Base de Datos</td>
                                <td>MySQL Workbench / DBeaver</td>
                                <td>Validaci√≥n de datos y queries</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

        </div>

        <footer style="background: #2c3e50; color: white; padding: 40px; text-align: center;">
            <p style="margin-bottom: 10px;">Plan de Pruebas Completo - Sistema Veterinario SisVet</p>
            <p style="opacity: 0.8; font-size: 0.9em;">Generado el 13 de Noviembre de 2025</p>
            <p style="opacity: 0.6; font-size: 0.85em; margin-top: 20px;">
                Este documento debe actualizarse conforme se implementen nuevas funcionalidades
            </p>
        </footer>
    </div>
</body>
</html>